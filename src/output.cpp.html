<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>src/output.cpp</title>
        <link rel="stylesheet" href="../codestyle-colorful.css">
    </head>
    <body>
        <div class="highlight"><pre><span id="1L" class="Ln"><a href="output.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"output.hpp"</span></a></span>
<span id="2L" class="Ln"></span>
<span id="3L" class="Ln"><a href="config.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"config.hpp"</span></a></span>
<span id="4L" class="Ln"></span>
<span id="5L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">assert</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="6L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">filesystem</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="7L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">utility</span><span class="cpf">/</span><span class="cpf">string_ref</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="8L" class="Ln"></span>
<span id="9L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">climits</span><span class="cpf">></span></span>
<span id="10L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">utility</span><span class="cpf">></span></span>
<span id="11L" class="Ln"></span>
<span id="12L" class="Ln"></span>
<span id="13L" class="Ln"><span class="kd">using</span> <span class="kd">namespace</span> <a href="output.hpp.html#synth" class="nn">synth</a>;</span>
<span id="14L" class="Ln"></span>
<span id="15L" class="Ln"><span class="kt">bool</span> <a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">::</span><span class="def decl nf" id="synth::Markup::empty">empty</span><span class="p">(</span><span class="p">)</span> <span class="kd">const</span></span>
<span id="16L" class="Ln"><span class="p">{</span></span>
<span id="17L" class="Ln">    <span class="k">return</span> <a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">==</span> <a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a></span>
<span id="18L" class="Ln">        <span class="o">||</span> <span class="p">(</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">==</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a> <span class="o">&amp;&amp;</span> <span class="o">!</span><a href="output.hpp.html#synth::Markup::isRef" class="nf">isRef</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="19L" class="Ln"><span class="p">}</span></span>
<span id="20L" class="Ln"></span>
<span id="21L" class="Ln"><a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <a href="output.hpp.html#synth::HighlightedFile" class="nc">HighlightedFile</a><span class="p">::</span><span class="def decl nf" id="synth::HighlightedFile::dstPath">dstPath</span><span class="p">(</span><span class="p">)</span> <span class="kd">const</span></span>
<span id="22L" class="Ln"><span class="p">{</span></span>
<span id="23L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="def decl nv">r</span> <span class="p">=</span> <a href="output.hpp.html#synth::HighlightedFile::inOutDir" class="vi">inOutDir</a><span class="p">-></span><span class="vi">second</span> <span class="p">/</span> <a href="output.hpp.html#synth::HighlightedFile::fname" class="vi">fname</a><span class="p">;</span></span>
<span id="24L" class="Ln">    <a href="#23L" class="nv">r</a> <span class="p">+=</span> <span class="s">".html"</span><span class="p">;</span></span>
<span id="25L" class="Ln">    <span class="k">return</span> <a href="#23L" class="nv">r</a><span class="p">;</span></span>
<span id="26L" class="Ln"><span class="p">}</span></span>
<span id="27L" class="Ln"></span>
<span id="28L" class="Ln"><span class="kd">static</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nf" id="htmlEscape:const-char&amp;,bool">htmlEscape</span><span class="p">(</span><span class="kt">char</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">c</span><span class="p">,</span> <span class="kt">bool</span> <span class="def decl nv">inAttr</span><span class="p">)</span></span>
<span id="29L" class="Ln"><span class="p">{</span></span>
<span id="30L" class="Ln">    <span class="k">switch</span> <span class="p">(</span><a href="#28L" class="nv">c</a><span class="p">)</span> <span class="p">{</span></span>
<span id="31L" class="Ln">        <span class="k">case</span> <span class="sc">'&lt;'</span><span class="p">:</span></span>
<span id="32L" class="Ln">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#28L" class="nv">inAttr</a><span class="p">)</span></span>
<span id="33L" class="Ln">                <span class="k">return</span> <span class="s">"&amp;lt;"</span><span class="p">;</span></span>
<span id="34L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="35L" class="Ln">        <span class="c">// Note: '>' does not need to be escaped.</span></span>
<span id="36L" class="Ln">        <span class="k">case</span> <span class="sc">'&amp;'</span><span class="p">:</span></span>
<span id="37L" class="Ln">            <span class="k">return</span> <span class="s">"&amp;amp;"</span><span class="p">;</span></span>
<span id="38L" class="Ln">        <span class="k">case</span> <span class="sc">'"'</span><span class="p">:</span></span>
<span id="39L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#28L" class="nv">inAttr</a><span class="p">)</span></span>
<span id="40L" class="Ln">                <span class="k">return</span> <span class="s">"&amp;quot;"</span><span class="p">;</span></span>
<span id="41L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="42L" class="Ln">    <span class="p">}</span></span>
<span id="43L" class="Ln">    <span class="k">return</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span><span class="p">(</span><span class="o">&amp;</span><a href="#28L" class="nv">c</a><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="p">;</span></span>
<span id="44L" class="Ln"><span class="p">}</span></span>
<span id="45L" class="Ln"></span>
<span id="46L" class="Ln"><span class="kd">static</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nf" id="htmlEscape:boost::string_ref,bool">htmlEscape</span><span class="p">(</span><span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nv">s</span><span class="p">,</span> <span class="kt">bool</span> <span class="def decl nv">inAttr</span><span class="p">)</span></span>
<span id="47L" class="Ln"><span class="p">{</span></span>
<span id="48L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nv">r</span><span class="p">;</span></span>
<span id="49L" class="Ln">    <a href="#48L" class="nv">r</a><span class="p">.</span><span class="nf">reserve</span><span class="p">(</span><a href="#46L" class="nv">s</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="50L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="def decl nv">c</span> <a href="#50L" class="p">:</a> <a href="#46L" class="nv">s</a><span class="p">)</span> <span class="p">{</span></span>
<span id="51L" class="Ln">        <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nv">escaped</span> <span class="p">=</span> <a href="#htmlEscape:const-char&amp;,bool" class="nf">htmlEscape</a><span class="p">(</span><a href="#50L" class="nv">c</a><span class="p">,</span> <a href="#46L" class="nv">inAttr</a><span class="p">)</span><span class="p">;</span></span>
<span id="52L" class="Ln">        <a href="#48L" class="nv">r</a><span class="p">.</span><span class="nf">append</span><span class="p">(</span><a href="#51L" class="nv">escaped</a><span class="p">.</span><span class="nf">data</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#51L" class="nv">escaped</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="53L" class="Ln">    <span class="p">}</span></span>
<span id="54L" class="Ln">    <span class="k">return</span> <a href="#48L" class="nv">r</a><span class="p">;</span></span>
<span id="55L" class="Ln"><span class="p">}</span></span>
<span id="56L" class="Ln"></span>
<span id="57L" class="Ln"><span class="kd">static</span> <span class="kt">char</span> <span class="kd">const</span><span class="p">*</span> <span class="def decl nf" id="getTokenKindCssClass:synth::TokenAttributes">getTokenKindCssClass</span><span class="p">(</span><a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a> <span class="def decl nv">attrs</span><span class="p">)</span></span>
<span id="58L" class="Ln"><span class="p">{</span></span>
<span id="59L" class="Ln">    <span class="c">// These CSS classes are the ones Pygments uses.</span></span>
<span id="60L" class="Ln">    <span class="kd">using</span> <span class="def decl nc">Tk</span> <span class="p">=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">;</span></span>
<span id="61L" class="Ln">    <a href="config.hpp.html#5L" class="cp">SYNTH_DISCLANGWARN_BEGIN</a>(<span class="l">"-Wswitch-enum"</span>)</span>
<span id="62L" class="Ln">    <span class="k">switch</span><span class="p">(</span><a href="#57L" class="nv">attrs</a> <a href="output.hpp.html#67L" class="p">&amp;</a> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::maskKind" class="no">maskKind</a><span class="p">)</span> <span class="p">{</span></span>
<span id="63L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::attr" class="no">attr</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nd"</span><span class="p">;</span> <span class="c">// Name.Decorator</span></span>
<span id="64L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::cmmt" class="no">cmmt</a><span class="p">:</span> <span class="k">return</span> <span class="s">"c"</span><span class="p">;</span> <span class="c">// Comment</span></span>
<span id="65L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::constant" class="no">constant</a><span class="p">:</span> <span class="k">return</span> <span class="s">"no"</span><span class="p">;</span> <span class="c">// Name.Constant</span></span>
<span id="66L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::func" class="no">func</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nf"</span><span class="p">;</span> <span class="c">// Name.Function</span></span>
<span id="67L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::kw" class="no">kw</a><span class="p">:</span> <span class="k">return</span> <span class="s">"k"</span><span class="p">;</span> <span class="c">// Keyword</span></span>
<span id="68L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::kwDecl" class="no">kwDecl</a><span class="p">:</span> <span class="k">return</span> <span class="s">"kd"</span><span class="p">;</span> <span class="c">// Keyword.Declaration</span></span>
<span id="69L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::lbl" class="no">lbl</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nl"</span><span class="p">;</span> <span class="c">// Name.Label</span></span>
<span id="70L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::lit" class="no">lit</a><span class="p">:</span> <span class="k">return</span> <span class="s">"l"</span><span class="p">;</span> <span class="c">// Literal</span></span>
<span id="71L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litChr" class="no">litChr</a><span class="p">:</span> <span class="k">return</span> <span class="s">"sc"</span><span class="p">;</span> <span class="c">// String.Char</span></span>
<span id="72L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litKw" class="no">litKw</a><span class="p">:</span> <span class="k">return</span> <span class="s">"kc"</span><span class="p">;</span> <span class="c">// Keyword.Constant</span></span>
<span id="73L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNum" class="no">litNum</a><span class="p">:</span> <span class="k">return</span> <span class="s">"m"</span><span class="p">;</span> <span class="c">// Number</span></span>
<span id="74L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNumFlt" class="no">litNumFlt</a><span class="p">:</span> <span class="k">return</span> <span class="s">"mf"</span><span class="p">;</span> <span class="c">// Number.Float</span></span>
<span id="75L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNumIntBin" class="no">litNumIntBin</a><span class="p">:</span> <span class="k">return</span> <span class="s">"mb"</span><span class="p">;</span> <span class="c">// Number.Binary</span></span>
<span id="76L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNumIntDecLong" class="no">litNumIntDecLong</a><span class="p">:</span> <span class="k">return</span> <span class="s">"ml"</span><span class="p">;</span> <span class="c">// Number.Integer.Long</span></span>
<span id="77L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNumIntHex" class="no">litNumIntHex</a><span class="p">:</span> <span class="k">return</span> <span class="s">"mh"</span><span class="p">;</span> <span class="c">// Number.Hex</span></span>
<span id="78L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litNumIntOct" class="no">litNumIntOct</a><span class="p">:</span> <span class="k">return</span> <span class="s">"mo"</span><span class="p">;</span> <span class="c">// Number.Oct</span></span>
<span id="79L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litStr" class="no">litStr</a><span class="p">:</span> <span class="k">return</span> <span class="s">"s"</span><span class="p">;</span> <span class="c">// String</span></span>
<span id="80L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::namesp" class="no">namesp</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nn"</span><span class="p">;</span> <span class="c">// Name.Namespace</span></span>
<span id="81L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::op" class="no">op</a><span class="p">:</span> <span class="k">return</span> <span class="s">"o"</span><span class="p">;</span> <span class="c">// Operator</span></span>
<span id="82L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::opWord" class="no">opWord</a><span class="p">:</span> <span class="k">return</span> <span class="s">"ow"</span><span class="p">;</span> <span class="c">// Operator.Word</span></span>
<span id="83L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::pre" class="no">pre</a><span class="p">:</span> <span class="k">return</span> <span class="s">"cp"</span><span class="p">;</span> <span class="c">// Comment.Preproc</span></span>
<span id="84L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::preIncludeFile" class="no">preIncludeFile</a><span class="p">:</span> <span class="k">return</span> <span class="s">"cpf"</span><span class="p">;</span> <span class="c">// Comment.PreprocFile</span></span>
<span id="85L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::punct" class="no">punct</a><span class="p">:</span> <span class="k">return</span> <span class="s">"p"</span><span class="p">;</span> <span class="c">// Punctuation</span></span>
<span id="86L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::ty" class="no">ty</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nc"</span><span class="p">;</span> <span class="c">// Name.Class</span></span>
<span id="87L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::tyBuiltin" class="no">tyBuiltin</a><span class="p">:</span> <span class="k">return</span> <span class="s">"kt"</span><span class="p">;</span> <span class="c">// Keyword.Type</span></span>
<span id="88L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::varGlobal" class="no">varGlobal</a><span class="p">:</span> <span class="k">return</span> <span class="s">"vg"</span><span class="p">;</span> <span class="c">// Name.Variable.Global</span></span>
<span id="89L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::varLocal" class="no">varLocal</a><span class="p">:</span> <span class="k">return</span> <span class="s">"nv"</span><span class="p">;</span> <span class="c">// Name.Variable</span></span>
<span id="90L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::varNonstaticMember" class="no">varNonstaticMember</a><span class="p">:</span> <span class="k">return</span> <span class="s">"vi"</span><span class="p">;</span> <span class="c">// Name.Variable.Instance</span></span>
<span id="91L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::varStaticMember" class="no">varStaticMember</a><span class="p">:</span> <span class="k">return</span> <span class="s">"vc"</span><span class="p">;</span> <span class="c">// Name.Variable.Class</span></span>
<span id="92L" class="Ln">        <span class="k">case</span> <a href="#60L" class="nc">Tk</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">:</span> <span class="k">return</span> <span class="s">""</span><span class="p">;</span></span>
<span id="93L" class="Ln"></span>
<span id="94L" class="Ln">        <span class="k">default</span><span class="p">:</span></span>
<span id="95L" class="Ln">            <span class="cp">assert</span>(<span class="kc">false</span> <span class="p">&amp;&amp;</span> <span class="s">"Unexpected token kind!"</span>)<span class="p">;</span></span>
<span id="96L" class="Ln">            <span class="k">return</span> <span class="s">""</span><span class="p">;</span></span>
<span id="97L" class="Ln">    <span class="p">}</span></span>
<span id="98L" class="Ln">    <a href="config.hpp.html#8L" class="cp">SYNTH_DISCLANGWARN_END</a></span>
<span id="99L" class="Ln"><span class="p">}</span></span>
<span id="100L" class="Ln"></span>
<span id="101L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="writeCssClasses:synth::TokenAttributes,std::ostream&amp;">writeCssClasses</span><span class="p">(</span><a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a> <span class="def decl nv">attrs</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl nv">out</span><span class="p">)</span></span>
<span id="102L" class="Ln"><span class="p">{</span></span>
<span id="103L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">(</span><a href="#101L" class="nv">attrs</a> <a href="output.hpp.html#67L" class="p">&amp;</a> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::flagDef" class="no">flagDef</a><span class="p">)</span> <span class="o">!=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">)</span></span>
<span id="104L" class="Ln">        <a href="#101L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"def "</span><span class="p">;</span></span>
<span id="105L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">(</span><a href="#101L" class="nv">attrs</a> <a href="output.hpp.html#67L" class="p">&amp;</a> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::flagDecl" class="no">flagDecl</a><span class="p">)</span> <span class="o">!=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">)</span></span>
<span id="106L" class="Ln">        <a href="#101L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"decl "</span><span class="p">;</span></span>
<span id="107L" class="Ln">    <a href="#101L" class="nv">out</a> <span class="p">&lt;&lt;</span> <a href="#getTokenKindCssClass:synth::TokenAttributes" class="nf">getTokenKindCssClass</a><span class="p">(</span><a href="#101L" class="nv">attrs</a><span class="p">)</span><span class="p">;</span></span>
<span id="108L" class="Ln"><span class="p">}</span></span>
<span id="109L" class="Ln"></span>
<span id="110L" class="Ln"><span class="c">// return: The written tag was a reference.</span></span>
<span id="111L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="writeBeginTag:const-synth::Markup&amp;,const-fs::path&amp;,synth::MultiTuProcessor&amp;,bool,std::ostream&amp;">writeBeginTag</span><span class="p">(</span></span>
<span id="112L" class="Ln">    <a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">m</span><span class="p">,</span></span>
<span id="113L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">outPath</span><span class="p">,</span></span>
<span id="114L" class="Ln">    <a href="output.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a><span class="p">&amp;</span> <span class="def decl nv">multiTuProcessor</span><span class="p">,</span></span>
<span id="115L" class="Ln">    <span class="kt">bool</span> <span class="def decl nv">reopened</span><span class="p">,</span></span>
<span id="116L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl nv">out</span><span class="p">)</span></span>
<span id="117L" class="Ln"><span class="p">{</span></span>
<span id="118L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nv">href</span> <span class="p">=</span> <a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::isRef" class="nf">isRef</a><span class="p">(</span><span class="p">)</span></span>
<span id="119L" class="Ln">        <span class="p">?</span> <a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::refd" class="vi">refd</a><span class="p">(</span><a href="#113L" class="nv">outPath</a><span class="p">,</span> <a href="#114L" class="nv">multiTuProcessor</a><span class="p">)</span> <span class="p">:</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="120L" class="Ln"></span>
<span id="121L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#118L" class="nv">href</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">==</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">)</span></span>
<span id="122L" class="Ln">        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="123L" class="Ln"></span>
<span id="124L" class="Ln">    <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="sc">'&lt;'</span><span class="p">;</span></span>
<span id="125L" class="Ln"></span>
<span id="126L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#118L" class="nv">href</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="127L" class="Ln">        <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"span"</span><span class="p">;</span></span>
<span id="128L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="129L" class="Ln">        <a href="#118L" class="nv">href</a> <span class="p">=</span> <a href="#htmlEscape:boost::string_ref,bool" class="nf">htmlEscape</a><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">move</span><span class="p">(</span><a href="#118L" class="nv">href</a><span class="p">)</span><span class="p">,</span> <span class="c">/*inAttr:*/</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span></span>
<span id="130L" class="Ln">        <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"a href=\""</span> <span class="p">&lt;&lt;</span> <a href="#118L" class="nv">href</a> <span class="p">&lt;&lt;</span> <span class="s">"\""</span><span class="p">;</span></span>
<span id="131L" class="Ln">    <span class="p">}</span></span>
<span id="132L" class="Ln"></span>
<span id="133L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">!=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">)</span> <span class="p">{</span></span>
<span id="134L" class="Ln">        <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">" class=\""</span><span class="p">;</span></span>
<span id="135L" class="Ln">        <a href="#writeCssClasses:synth::TokenAttributes,std::ostream&amp;" class="nf">writeCssClasses</a><span class="p">(</span><a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a><span class="p">,</span> <a href="#116L" class="nv">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="136L" class="Ln">        <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="sc">'\"'</span><span class="p">;</span></span>
<span id="137L" class="Ln">    <span class="p">}</span></span>
<span id="138L" class="Ln">    </span>
<span id="139L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#115L" class="nv">reopened</a> <span class="o">&amp;&amp;</span> <a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::fileUniqueName" class="vi">fileUniqueName</a> <span class="o">&amp;&amp;</span> <span class="o">!</span><a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::fileUniqueName" class="vi">fileUniqueName</a><span class="p">-></span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="140L" class="Ln">        <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">" id=\""</span></span>
<span id="141L" class="Ln">            <span class="p">&lt;&lt;</span> <a href="#htmlEscape:boost::string_ref,bool" class="nf">htmlEscape</a><span class="p">(</span><span class="o">*</span><a href="#112L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::fileUniqueName" class="vi">fileUniqueName</a><span class="p">,</span> <span class="c">/*inAttr:*/</span> <span class="kc">true</span><span class="p">)</span> <span class="p">&lt;&lt;</span> <span class="sc">'\"'</span><span class="p">;</span></span>
<span id="142L" class="Ln">    <span class="p">}</span></span>
<span id="143L" class="Ln">    <a href="#116L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="sc">'>'</span><span class="p">;</span></span>
<span id="144L" class="Ln"></span>
<span id="145L" class="Ln">    <span class="k">return</span> <span class="o">!</span><a href="#118L" class="nv">href</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="146L" class="Ln"><span class="p">}</span></span>
<span id="147L" class="Ln"></span>
<span id="148L" class="Ln"></span>
<span id="149L" class="Ln"><span class="kd">namespace</span> <span class="p">{</span></span>
<span id="150L" class="Ln"></span>
<span id="151L" class="Ln"><span class="kd">struct</span> <span class="def decl nc" id="MarkupInfo">MarkupInfo</span> <span class="p">{</span></span>
<span id="152L" class="Ln">    <a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">*</span> <span class="def decl vi" id="MarkupInfo::markup">markup</span><span class="p">;</span></span>
<span id="153L" class="Ln">    <span class="kt">bool</span> <span class="def decl vi" id="MarkupInfo::wasRef">wasRef</span><span class="p">;</span></span>
<span id="154L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="155L" class="Ln"></span>
<span id="156L" class="Ln"><span class="kd">struct</span> <span class="def decl nc" id="OutputState">OutputState</span> <span class="p">{</span></span>
<span id="157L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_istream" class="nc">istream</a><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::in">in</span><span class="p">;</span></span>
<span id="158L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::out">out</span><span class="p">;</span></span>
<span id="159L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl vi" id="OutputState::lineno">lineno</span><span class="p">;</span></span>
<span id="160L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="#MarkupInfo" class="nc">MarkupInfo</a><span class="p">></span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::activeTags">activeTags</span><span class="p">;</span></span>
<span id="161L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::outPath">outPath</span><span class="p">;</span></span>
<span id="162L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/utility/pair" class="nc">pair</a><span class="p">&lt;</span><span class="kt">unsigned</span><span class="p">,</span> <span class="kt">unsigned</span><span class="p">>></span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::disabledLines">disabledLines</span><span class="p">;</span></span>
<span id="163L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/size_t" class="nc">size_t</a> <span class="def decl vi" id="OutputState::disabledLineIdx">disabledLineIdx</span><span class="p">;</span></span>
<span id="164L" class="Ln">    <a href="output.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a><span class="p">&amp;</span> <span class="def decl vi" id="OutputState::multiTuProcessor">multiTuProcessor</span><span class="p">;</span></span>
<span id="165L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="166L" class="Ln"></span>
<span id="167L" class="Ln"><span class="p">}</span> <span class="c">// anonymous namespace</span></span>
<span id="168L" class="Ln"></span>
<span id="169L" class="Ln"></span>
<span id="170L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="writeEndTag:const(anonymous-namespace)::MarkupInfo&amp;,std::ostream&amp;">writeEndTag</span><span class="p">(</span><a href="#MarkupInfo" class="nc">MarkupInfo</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">mi</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl nv">out</span><span class="p">)</span></span>
<span id="171L" class="Ln"><span class="p">{</span></span>
<span id="172L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#170L" class="nv">mi</a><span class="p">.</span><a href="#MarkupInfo::wasRef" class="vi">wasRef</a><span class="p">)</span></span>
<span id="173L" class="Ln">        <a href="#170L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;/a>"</span><span class="p">;</span></span>
<span id="174L" class="Ln">    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#170L" class="nv">mi</a><span class="p">.</span><a href="#MarkupInfo::markup" class="vi">markup</a><span class="p">-></span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">!=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::none" class="no">none</a><span class="p">)</span></span>
<span id="175L" class="Ln">        <a href="#170L" class="nv">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;/span>"</span><span class="p">;</span></span>
<span id="176L" class="Ln"><span class="p">}</span></span>
<span id="177L" class="Ln"></span>
<span id="178L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="writeAllEnds:std::ostream&amp;,const-std::vector<MarkupInfo>&amp;">writeAllEnds</span><span class="p">(</span></span>
<span id="179L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl nv">out</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="#MarkupInfo" class="nc">MarkupInfo</a><span class="p">></span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">activeTags</span><span class="p">)</span></span>
<span id="180L" class="Ln"><span class="p">{</span></span>
<span id="181L" class="Ln"></span>
<span id="182L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">rit</span> <span class="p">=</span> <a href="#179L" class="nv">activeTags</a><span class="p">.</span><span class="nf">rbegin</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="183L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">rend</span> <span class="p">=</span> <a href="#179L" class="nv">activeTags</a><span class="p">.</span><span class="nf">rend</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="184L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="p">;</span> <a href="#182L" class="nv">rit</a> <span class="p">!=</span> <a href="#183L" class="nv">rend</a><span class="p">;</span> <span class="p">++</span><a href="#182L" class="nv">rit</a><span class="p">)</span></span>
<span id="185L" class="Ln">        <a href="#writeEndTag:const(anonymous-namespace)::MarkupInfo&amp;,std::ostream&amp;" class="nf">writeEndTag</a><span class="p">(</span><span class="p">*</span><a href="#182L" class="nv">rit</a><span class="p">,</span> <a href="#179L" class="nv">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="186L" class="Ln"><span class="p">}</span></span>
<span id="187L" class="Ln"></span>
<span id="188L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="writeLineStart:(anonymous-namespace)::OutputState&amp;">writeLineStart</span><span class="p">(</span><a href="#OutputState" class="nc">OutputState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">)</span></span>
<span id="189L" class="Ln"><span class="p">{</span></span>
<span id="190L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLineIdx" class="vi">disabledLineIdx</a> <span class="o">&lt;</span> <a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLines" class="vi">disabledLines</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span></span>
<span id="191L" class="Ln">        <span class="o">&amp;&amp;</span> <a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLines" class="vi">disabledLines</a><span class="p">[</span><a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLineIdx" class="vi">disabledLineIdx</a><span class="p">]</span><span class="p">.</span><span class="vi">first</span> <span class="o">==</span> <a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a></span>
<span id="192L" class="Ln">    <span class="p">)</span> <span class="p">{</span></span>
<span id="193L" class="Ln">        <a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;div class=\"disabled-code\">"</span><span class="p">;</span></span>
<span id="194L" class="Ln">    <span class="p">}</span></span>
<span id="195L" class="Ln">    <a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;span id=\""</span> <span class="p">&lt;&lt;</span> <a href="output.hpp.html#synth::lineId:unsigned-int" class="nf">lineId</a><span class="p">(</span><a href="#188L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a><span class="p">)</span> <span class="p">&lt;&lt;</span> <span class="s">"\" class=\"Ln\">"</span><span class="p">;</span></span>
<span id="196L" class="Ln"><span class="p">}</span></span>
<span id="197L" class="Ln"></span>
<span id="198L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="copyWithLinenosUntil:(anonymous-namespace)::OutputState&amp;,unsigned-int">copyWithLinenosUntil</span><span class="p">(</span><a href="#OutputState" class="nc">OutputState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">offset</span><span class="p">)</span></span>
<span id="199L" class="Ln"><span class="p">{</span></span>
<span id="200L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a> <span class="o">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span></span>
<span id="201L" class="Ln">        <span class="o">++</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a><span class="p">;</span></span>
<span id="202L" class="Ln">        <a href="#writeLineStart:(anonymous-namespace)::OutputState&amp;" class="nf">writeLineStart</a><span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="203L" class="Ln">    <span class="p">}</span></span>
<span id="204L" class="Ln"></span>
<span id="205L" class="Ln">    <span class="k">while</span> <span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::in" class="vi">in</a> <span class="o">&amp;&amp;</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::in" class="vi">in</a><span class="p">.</span><span class="nf">tellg</span><span class="p">(</span><span class="p">)</span> <span class="o">&lt;</span> <a href="#198L" class="nv">offset</a><span class="p">)</span> <span class="p">{</span></span>
<span id="206L" class="Ln">        <span class="kt">int</span> <span class="def decl nv">ch</span> <span class="p">=</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::in" class="vi">in</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="207L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#206L" class="nv">ch</a> <span class="o">==</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_istream" class="nc">istream</a><span class="p">::</span><span class="nc">traits_type</span><span class="p">::</span><span class="nf">eof</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="208L" class="Ln">            <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;/span>\n"</span><span class="p">;</span> <span class="c">// end tag for lineno.</span></span>
<span id="209L" class="Ln">            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="210L" class="Ln">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="211L" class="Ln">            <span class="k">switch</span> <span class="p">(</span><a href="#206L" class="nv">ch</a><span class="p">)</span> <span class="p">{</span></span>
<span id="212L" class="Ln">                <span class="k">case</span> <span class="sc">'\n'</span><span class="p">:</span> <span class="p">{</span></span>
<span id="213L" class="Ln">                    <a href="#writeAllEnds:std::ostream&amp;,const-std::vector<MarkupInfo>&amp;" class="nf">writeAllEnds</a><span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a><span class="p">,</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::activeTags" class="vi">activeTags</a><span class="p">)</span><span class="p">;</span></span>
<span id="214L" class="Ln">                    <span class="o">++</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a><span class="p">;</span></span>
<span id="215L" class="Ln">                    <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;/span>"</span><span class="p">;</span></span>
<span id="216L" class="Ln">                    <span class="k">if</span> <span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLineIdx" class="vi">disabledLineIdx</a> <span class="o">&lt;</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLines" class="vi">disabledLines</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span></span>
<span id="217L" class="Ln">                        <span class="o">&amp;&amp;</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLines" class="vi">disabledLines</a><span class="p">[</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLineIdx" class="vi">disabledLineIdx</a><span class="p">]</span><span class="p">.</span><span class="vi">second</span></span>
<span id="218L" class="Ln">                            <span class="o">==</span> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a></span>
<span id="219L" class="Ln">                    <span class="p">)</span> <span class="p">{</span></span>
<span id="220L" class="Ln">                        <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="s">"&lt;/div>"</span><span class="p">;</span></span>
<span id="221L" class="Ln">                        <span class="o">++</span><a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::disabledLineIdx" class="vi">disabledLineIdx</a><span class="p">;</span></span>
<span id="222L" class="Ln">                    <span class="p">}</span></span>
<span id="223L" class="Ln">                    <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span></span>
<span id="224L" class="Ln">                    <a href="#writeLineStart:(anonymous-namespace)::OutputState&amp;" class="nf">writeLineStart</a><span class="p">(</span><a href="#198L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="225L" class="Ln"></span>
<span id="226L" class="Ln">                    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">mi</span> <a href="#226L" class="p">:</a> <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::activeTags" class="vi">activeTags</a><span class="p">)</span> <span class="p">{</span></span>
<span id="227L" class="Ln">                        <a href="#writeBeginTag:const-synth::Markup&amp;,const-fs::path&amp;,synth::MultiTuProcessor&amp;,bool,std::ostream&amp;" class="nf">writeBeginTag</a><span class="p">(</span></span>
<span id="228L" class="Ln">                            <span class="o">*</span><a href="#226L" class="nv">mi</a><span class="p">.</span><a href="#MarkupInfo::markup" class="vi">markup</a><span class="p">,</span></span>
<span id="229L" class="Ln">                            <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::outPath" class="vi">outPath</a><span class="p">,</span></span>
<span id="230L" class="Ln">                            <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::multiTuProcessor" class="vi">multiTuProcessor</a><span class="p">,</span></span>
<span id="231L" class="Ln">                            <span class="c">/*reopened:*/</span> <span class="kc">true</span><span class="p">,</span></span>
<span id="232L" class="Ln">                            <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="233L" class="Ln">                    <span class="p">}</span></span>
<span id="234L" class="Ln">                <span class="p">}</span> <span class="k">break</span><span class="p">;</span></span>
<span id="235L" class="Ln"></span>
<span id="236L" class="Ln">                <span class="k">case</span> <span class="sc">'\r'</span><span class="p">:</span></span>
<span id="237L" class="Ln">                    <span class="c">// Discard.</span></span>
<span id="238L" class="Ln">                    <span class="k">break</span><span class="p">;</span></span>
<span id="239L" class="Ln">                <span class="k">default</span><span class="p">:</span></span>
<span id="240L" class="Ln">                    <a href="#198L" class="nv">state</a><span class="p">.</span><a href="#OutputState::out" class="vi">out</a> <span class="p">&lt;&lt;</span> <a href="#htmlEscape:const-char&amp;,bool" class="nf">htmlEscape</a><span class="p">(</span><span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">></span><span class="p">(</span><a href="#206L" class="nv">ch</a><span class="p">)</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span></span>
<span id="241L" class="Ln">                    <span class="k">break</span><span class="p">;</span></span>
<span id="242L" class="Ln">            <span class="p">}</span></span>
<span id="243L" class="Ln">        <span class="p">}</span></span>
<span id="244L" class="Ln">    <span class="p">}</span></span>
<span id="245L" class="Ln">    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="246L" class="Ln"><span class="p">}</span></span>
<span id="247L" class="Ln"></span>
<span id="248L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="copyWithLinenosUntilNoEof:(anonymous-namespace)::OutputState&amp;,unsigned-int">copyWithLinenosUntilNoEof</span><span class="p">(</span><a href="#OutputState" class="nc">OutputState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">offset</span><span class="p">)</span></span>
<span id="249L" class="Ln"><span class="p">{</span></span>
<span id="250L" class="Ln">    <span class="kt">bool</span> <span class="def decl nv">eof</span> <span class="p">=</span> <span class="o">!</span><a href="#copyWithLinenosUntil:(anonymous-namespace)::OutputState&amp;,unsigned-int" class="nf">copyWithLinenosUntil</a><span class="p">(</span><a href="#248L" class="nv">state</a><span class="p">,</span> <a href="#248L" class="nv">offset</a><span class="p">)</span><span class="p">;</span></span>
<span id="251L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#250L" class="nv">eof</a><span class="p">)</span> <span class="p">{</span></span>
<span id="252L" class="Ln">        <span class="k">throw</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/error/runtime_error" class="nc">runtime_error</a><span class="p">(</span></span>
<span id="253L" class="Ln">            <span class="s">"unexpected EOF in input source "</span> <span class="p">+</span> <a href="#248L" class="nv">state</a><span class="p">.</span><a href="#OutputState::outPath" class="vi">outPath</a><span class="p">.</span><span class="nf">string</span><span class="p">(</span><span class="p">)</span></span>
<span id="254L" class="Ln">            <span class="p">+</span> <span class="s">" at line "</span> <span class="p">+</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string/to_string" class="nf">to_string</a><span class="p">(</span><a href="#248L" class="nv">state</a><span class="p">.</span><a href="#OutputState::lineno" class="vi">lineno</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="255L" class="Ln">    <span class="p">}</span></span>
<span id="256L" class="Ln"><span class="p">}</span></span>
<span id="257L" class="Ln"></span>
<span id="258L" class="Ln"><span class="c">// ORDER BY beginOffset ASC, endOffset DESC</span></span>
<span id="259L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="rangeLessThan:const-synth::Markup&amp;,const-synth::Markup&amp;">rangeLessThan</span><span class="p">(</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">lhs</span><span class="p">,</span> <a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">rhs</span><span class="p">)</span></span>
<span id="260L" class="Ln"><span class="p">{</span></span>
<span id="261L" class="Ln">    <span class="k">return</span> <a href="#259L" class="nv">lhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">!=</span> <a href="#259L" class="nv">rhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a></span>
<span id="262L" class="Ln">        <span class="p">?</span> <a href="#259L" class="nv">lhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">&lt;</span> <a href="#259L" class="nv">rhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a></span>
<span id="263L" class="Ln">        <span class="p">:</span> <a href="#259L" class="nv">lhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a> <span class="o">></span> <a href="#259L" class="nv">rhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a><span class="p">;</span></span>
<span id="264L" class="Ln"><span class="p">}</span></span>
<span id="265L" class="Ln"></span>
<span id="266L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="rangesOverlap:const-synth::Markup&amp;,const-synth::Markup&amp;">rangesOverlap</span><span class="p">(</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">lhs</span><span class="p">,</span> <a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">rhs</span><span class="p">)</span></span>
<span id="267L" class="Ln"><span class="p">{</span></span>
<span id="268L" class="Ln">    <span class="k">return</span> <a href="#266L" class="nv">lhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">&lt;</span> <a href="#266L" class="nv">rhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a></span>
<span id="269L" class="Ln">        <span class="o">&amp;&amp;</span> <a href="#266L" class="nv">rhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">&lt;</span> <a href="#266L" class="nv">lhs</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a><span class="p">;</span></span>
<span id="270L" class="Ln"><span class="p">}</span></span>
<span id="271L" class="Ln"></span>
<span id="272L" class="Ln"><span class="kt">void</span> <a href="output.hpp.html#synth" class="nn">synth</a><span class="p">::</span><span class="def decl nf" id="synth::sortMarkups:std::vector<Markup>&amp;">sortMarkups</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span><span class="p">&amp;</span> <span class="def decl nv">markups</span><span class="p">)</span></span>
<span id="273L" class="Ln"><span class="p">{</span></span>
<span id="274L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">sort</span><span class="p">(</span><a href="#272L" class="nv">markups</a><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#272L" class="nv">markups</a><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="o">&amp;</span><a href="#rangeLessThan:const-synth::Markup&amp;,const-synth::Markup&amp;" class="nf">rangeLessThan</a><span class="p">)</span><span class="p">;</span></span>
<span id="275L" class="Ln"><span class="p">}</span></span>
<span id="276L" class="Ln"></span>
<span id="277L" class="Ln"><span class="kt">void</span> <a href="output.hpp.html#synth" class="nn">synth</a><span class="p">::</span><a href="output.hpp.html#synth::HighlightedFile" class="nc">HighlightedFile</a><span class="p">::</span><span class="def decl nf" id="synth::HighlightedFile::supplementMarkups:const-std::vector<Markup>&amp;">supplementMarkups</span><span class="p">(</span></span>
<span id="278L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">supplementary</span><span class="p">)</span></span>
<span id="279L" class="Ln"><span class="p">{</span></span>
<span id="280L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/size_t" class="nc">size_t</a> <span class="def decl nv">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span></span>
<span id="281L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl nv">nextSupps</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span></span>
<span id="282L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">supp</span> <a href="#282L" class="p">:</a> <a href="#278L" class="nv">supplementary</a><span class="p">)</span> <span class="p">{</span></span>
<span id="283L" class="Ln">        <span class="k">while</span> <span class="p">(</span><a href="#280L" class="nv">i</a> <span class="o">&lt;</span> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">[</span><a href="#280L" class="nv">i</a><span class="p">]</span><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a> <span class="o">&lt;</span> <a href="#282L" class="nv">supp</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a><span class="p">)</span> <span class="p">{</span></span>
<span id="284L" class="Ln">            <span class="o">++</span><a href="#280L" class="nv">i</a><span class="p">;</span></span>
<span id="285L" class="Ln">            <a href="#280L" class="nv">i</a> <span class="p">+=</span> <a href="#281L" class="nv">nextSupps</a><span class="p">;</span></span>
<span id="286L" class="Ln">            <a href="#281L" class="nv">nextSupps</a> <span class="o">=</span> <span class="m">0</span><span class="p">;</span></span>
<span id="287L" class="Ln">        <span class="p">}</span></span>
<span id="288L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#280L" class="nv">i</a> <span class="o">>=</span> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="289L" class="Ln">            <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="#282L" class="nv">supp</a><span class="p">)</span><span class="p">;</span></span>
<span id="290L" class="Ln">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#rangesOverlap:const-synth::Markup&amp;,const-synth::Markup&amp;" class="nf">rangesOverlap</a><span class="p">(</span><a href="#282L" class="nv">supp</a><span class="p">,</span> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">[</span><a href="#280L" class="nv">i</a><span class="p">]</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="291L" class="Ln">            <span class="kt">bool</span> <span class="kd">const</span> <span class="def decl nv">before</span> <span class="p">=</span> <a href="#rangeLessThan:const-synth::Markup&amp;,const-synth::Markup&amp;" class="nf">rangeLessThan</a><span class="p">(</span><a href="#282L" class="nv">supp</a><span class="p">,</span> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">[</span><a href="#280L" class="nv">i</a><span class="p">]</span><span class="p">)</span><span class="p">;</span></span>
<span id="292L" class="Ln">            <span class="c">// Silence clang warning.</span></span>
<span id="293L" class="Ln">            <span class="kd">auto</span> <span class="def decl nv">idiff</span> <span class="p">=</span> <span class="k">static_cast</span><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span><span class="p">::</span><span class="nc">difference_type</span><span class="p">></span><span class="p">(</span><a href="#280L" class="nv">i</a><span class="p">)</span></span>
<span id="294L" class="Ln">                <span class="o">+</span> <span class="p">(</span><a href="#291L" class="nv">before</a> <span class="p">?</span> <span class="m">0</span> <span class="p">:</span> <span class="m">1</span><span class="p">)</span><span class="p">;</span></span>
<span id="295L" class="Ln">            <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="p">)</span> <span class="p">+</span> <a href="#293L" class="nv">idiff</a><span class="p">,</span> <a href="#282L" class="nv">supp</a><span class="p">)</span><span class="p">;</span></span>
<span id="296L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#291L" class="nv">before</a><span class="p">)</span></span>
<span id="297L" class="Ln">                <span class="o">++</span><a href="#280L" class="nv">i</a><span class="p">;</span></span>
<span id="298L" class="Ln">            <span class="k">else</span></span>
<span id="299L" class="Ln">                <span class="o">++</span><a href="#281L" class="nv">nextSupps</a><span class="p">;</span></span>
<span id="300L" class="Ln">        <span class="p">}</span></span>
<span id="301L" class="Ln">    <span class="p">}</span></span>
<span id="302L" class="Ln"><span class="p">}</span></span>
<span id="303L" class="Ln"></span>
<span id="304L" class="Ln"><span class="kt">void</span> <a href="output.hpp.html#synth::HighlightedFile" class="nc">HighlightedFile</a><span class="p">::</span><span class="def decl nf" id="synth::HighlightedFile::writeTo:std::ostream&amp;,synth::MultiTuProcessor&amp;,std::ifstream&amp;">writeTo</span><span class="p">(</span></span>
<span id="305L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="nc">ostream</a><span class="p">&amp;</span> <span class="def decl nv">out</span><span class="p">,</span> <a href="output.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a><span class="p">&amp;</span> <span class="def decl nv">multiTuProcessor</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ifstream" class="nc">ifstream</a><span class="p">&amp;</span> <span class="def decl nv">selfIn</span><span class="p">)</span> <span class="kd">const</span></span>
<span id="306L" class="Ln"><span class="p">{</span></span>
<span id="307L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="def decl nv">outPath</span> <span class="p">=</span> <a href="#synth::HighlightedFile::dstPath" class="nf">dstPath</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="308L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="#MarkupInfo" class="nc">MarkupInfo</a><span class="p">></span> <span class="def decl nv">activeTags</span><span class="p">;</span></span>
<span id="309L" class="Ln">    <a href="#OutputState" class="nc">OutputState</a> <span class="def decl nv">state</span> <span class="p">{</span></span>
<span id="310L" class="Ln">        <a href="#305L" class="nv">selfIn</a><span class="p">,</span></span>
<span id="311L" class="Ln">        <a href="#305L" class="nv">out</a><span class="p">,</span></span>
<span id="312L" class="Ln">        <span class="m">0</span><span class="p">,</span></span>
<span id="313L" class="Ln">        <a href="#308L" class="nv">activeTags</a><span class="p">,</span></span>
<span id="314L" class="Ln">        <a href="#307L" class="nv">outPath</a><span class="p">,</span></span>
<span id="315L" class="Ln">        <a href="output.hpp.html#synth::HighlightedFile::disabledLines" class="vi">disabledLines</a><span class="p">,</span></span>
<span id="316L" class="Ln">        <span class="m">0</span><span class="p">,</span></span>
<span id="317L" class="Ln">        <a href="#305L" class="nv">multiTuProcessor</a></span>
<span id="318L" class="Ln">    <span class="p">}</span><span class="p">;</span></span>
<span id="319L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">m</span> <a href="#319L" class="p">:</a> <a href="output.hpp.html#synth::HighlightedFile::markups" class="vi">markups</a><span class="p">)</span> <span class="p">{</span></span>
<span id="320L" class="Ln">        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span></span>
<span id="321L" class="Ln">            <span class="o">&amp;&amp;</span> <a href="#319L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">>=</span> <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><a href="#MarkupInfo::markup" class="vi">markup</a><span class="p">-></span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a></span>
<span id="322L" class="Ln">        <span class="p">)</span> <span class="p">{</span></span>
<span id="323L" class="Ln">            <a href="#MarkupInfo" class="nc">MarkupInfo</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">miEnd</span> <span class="p">=</span> <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="324L" class="Ln">            <a href="#copyWithLinenosUntilNoEof:(anonymous-namespace)::OutputState&amp;,unsigned-int" class="nf">copyWithLinenosUntilNoEof</a><span class="p">(</span><a href="#309L" class="nv">state</a><span class="p">,</span> <a href="#323L" class="nv">miEnd</a><span class="p">.</span><a href="#MarkupInfo::markup" class="vi">markup</a><span class="p">-></span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a><span class="p">)</span><span class="p">;</span></span>
<span id="325L" class="Ln">            <a href="#writeEndTag:const(anonymous-namespace)::MarkupInfo&amp;,std::ostream&amp;" class="nf">writeEndTag</a><span class="p">(</span><a href="#323L" class="nv">miEnd</a><span class="p">,</span> <a href="#305L" class="nv">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="326L" class="Ln">            <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">pop_back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="327L" class="Ln">        <span class="p">}</span></span>
<span id="328L" class="Ln"></span>
<span id="329L" class="Ln">        <a href="#copyWithLinenosUntilNoEof:(anonymous-namespace)::OutputState&amp;,unsigned-int" class="nf">copyWithLinenosUntilNoEof</a><span class="p">(</span><a href="#309L" class="nv">state</a><span class="p">,</span> <a href="#319L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a><span class="p">)</span><span class="p">;</span></span>
<span id="330L" class="Ln">        <span class="kt">bool</span> <span class="def decl nv">wasRef</span> <span class="p">=</span> <a href="#writeBeginTag:const-synth::Markup&amp;,const-fs::path&amp;,synth::MultiTuProcessor&amp;,bool,std::ostream&amp;" class="nf">writeBeginTag</a><span class="p">(</span></span>
<span id="331L" class="Ln">            <a href="#319L" class="nv">m</a><span class="p">,</span> <a href="#309L" class="nv">state</a><span class="p">.</span><a href="#OutputState::outPath" class="vi">outPath</a><span class="p">,</span> <a href="#309L" class="nv">state</a><span class="p">.</span><a href="#OutputState::multiTuProcessor" class="vi">multiTuProcessor</a><span class="p">,</span> <span class="c">/*reopened:*/</span> <span class="kc">false</span><span class="p">,</span> <a href="#305L" class="nv">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="332L" class="Ln">        <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><span class="p">{</span> <span class="o">&amp;</span><a href="#319L" class="nv">m</a><span class="p">,</span> <a href="#330L" class="nv">wasRef</a> <span class="p">}</span><span class="p">)</span><span class="p">;</span></span>
<span id="333L" class="Ln">    <span class="p">}</span></span>
<span id="334L" class="Ln">    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="335L" class="Ln">        <a href="#copyWithLinenosUntilNoEof:(anonymous-namespace)::OutputState&amp;,unsigned-int" class="nf">copyWithLinenosUntilNoEof</a><span class="p">(</span><a href="#309L" class="nv">state</a><span class="p">,</span> <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><a href="#MarkupInfo::markup" class="vi">markup</a><span class="p">-></span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a><span class="p">)</span><span class="p">;</span></span>
<span id="336L" class="Ln">        <a href="#writeEndTag:const(anonymous-namespace)::MarkupInfo&amp;,std::ostream&amp;" class="nf">writeEndTag</a><span class="p">(</span><a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#305L" class="nv">out</a><span class="p">)</span><span class="p">;</span></span>
<span id="337L" class="Ln">        <a href="#308L" class="nv">activeTags</a><span class="p">.</span><span class="nf">pop_back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="338L" class="Ln">    <span class="p">}</span></span>
<span id="339L" class="Ln">    <span class="cp">BOOST_VERIFY</span>(<span class="o">!</span><a href="#copyWithLinenosUntil:(anonymous-namespace)::OutputState&amp;,unsigned-int" class="nf">copyWithLinenosUntil</a><span class="p">(</span><a href="#309L" class="nv">state</a><span class="p">,</span> <span class="cp">UINT_MAX</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="340L" class="Ln"><span class="p">}</span></span>
<span id="341L" class="Ln"></span>
</pre></div>
        <script src="../code.js"></script>
    </body>
</html>
