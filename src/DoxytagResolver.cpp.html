<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>src/DoxytagResolver.cpp</title>
        <link rel="stylesheet" href="../codestyle-colorful.css">
    </head>
    <body>
        <div class="highlight"><pre><span id="1L" class="Ln"><a href="DoxytagResolver.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"DoxytagResolver.hpp"</span></a></span>
<span id="2L" class="Ln"></span>
<span id="3L" class="Ln"><a href="CgStr.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"CgStr.hpp"</span></a></span>
<span id="4L" class="Ln"><a href="output.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"output.hpp"</span></a></span>
<span id="5L" class="Ln"><a href="debug.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"debug.hpp"</span></a></span>
<span id="6L" class="Ln"><a href="xref.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"xref.hpp"</span></a></span>
<span id="7L" class="Ln"></span>
<span id="8L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">property_tree</span><span class="cpf">/</span><span class="cpf">ptree</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="9L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">property_tree</span><span class="cpf">/</span><span class="cpf">xml_parser</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="10L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">filesystem</span><span class="cpf">/</span><span class="cpf">fstream</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="11L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">utility</span><span class="cpf">/</span><span class="cpf">string_ref</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="12L" class="Ln"></span>
<span id="13L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">iostream</span><span class="cpf">></span></span>
<span id="14L" class="Ln"></span>
<span id="15L" class="Ln"><span class="kd">using</span> <span class="kd">namespace</span> <a href="DoxytagResolver.hpp.html#synth" class="nn">synth</a>;</span>
<span id="16L" class="Ln"></span>
<span id="17L" class="Ln"><span class="kd">static</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">optional</span><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">></span> <span class="def decl nf" id="getUrl:const-ptree::ptree&amp;">getUrl</span><span class="p">(</span><a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nc">ptree</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">elem</span><span class="p">)</span></span>
<span id="18L" class="Ln"><span class="p">{</span></span>
<span id="19L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">r</span> <span class="p">=</span> <a href="#17L" class="nv">elem</a><span class="p">.</span><span class="nf">get_optional</span><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">></span><span class="p">(</span><span class="s">"anchorfile"</span><span class="p">)</span><span class="p">;</span></span>
<span id="20L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">!</span><a href="#19L" class="nv">r</a><span class="p">)</span></span>
<span id="21L" class="Ln">        <a href="#19L" class="nv">r</a> <span class="p">=</span> <a href="#17L" class="nv">elem</a><span class="p">.</span><span class="nf">get_optional</span><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">></span><span class="p">(</span><span class="s">"filename"</span><span class="p">)</span><span class="p">;</span></span>
<span id="22L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">!</span><a href="#19L" class="nv">r</a><span class="p">)</span></span>
<span id="23L" class="Ln">        <span class="k">return</span> <a href="#19L" class="nv">r</a><span class="p">;</span></span>
<span id="24L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">anchor</span> <span class="p">=</span> <a href="#17L" class="nv">elem</a><span class="p">.</span><span class="nf">get_child_optional</span><span class="p">(</span><span class="s">"anchor"</span><span class="p">)</span><span class="p">;</span></span>
<span id="25L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#24L" class="nv">anchor</a> <span class="o">&amp;&amp;</span> <span class="o">!</span><a href="#24L" class="nv">anchor</a><span class="p">-></span><span class="nf">data</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="26L" class="Ln">        <span class="p">*</span><a href="#19L" class="nv">r</a> <span class="p">+=</span> <span class="sc">'#'</span><span class="p">;</span></span>
<span id="27L" class="Ln">        <a href="#19L" class="nv">r</a><span class="p">-></span><span class="nf">append</span><span class="p">(</span><a href="#24L" class="nv">anchor</a><span class="p">-></span><span class="nf">data</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="28L" class="Ln">    <span class="p">}</span></span>
<span id="29L" class="Ln">    <span class="k">return</span> <a href="#19L" class="nv">r</a><span class="p">;</span></span>
<span id="30L" class="Ln"><span class="p">}</span></span>
<span id="31L" class="Ln"></span>
<span id="32L" class="Ln"><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><span class="def decl nf" id="synth::DoxytagResolver::DoxytagResolver:const-ptree::ptree&amp;,boost::string_ref">DoxytagResolver</span><span class="p">(</span><a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nc">ptree</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">tagFileDom</span><span class="p">,</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nv">baseUrl</span><span class="p">)</span></span>
<span id="33L" class="Ln">    <span class="p">:</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::m_baseUrl" class="vi">m_baseUrl</a><span class="p">(</span><a href="#32L" class="nv">baseUrl</a><span class="p">)</span></span>
<span id="34L" class="Ln"><span class="p">{</span></span>
<span id="35L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">kv</span> <a href="#35L" class="p">:</a> <a href="#32L" class="nv">tagFileDom</a><span class="p">.</span><span class="nf">get_child</span><span class="p">(</span><span class="s">"tagfile"</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="36L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#35L" class="nv">kv</a><span class="p">.</span><span class="vi">first</span> <span class="p">==</span> <span class="s">"compound"</span><span class="p">)</span> <span class="p">{</span></span>
<span id="37L" class="Ln">            <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::parseCompound:const-ptree::ptree&amp;,const-std::string&amp;" class="nf">parseCompound</a><span class="p">(</span><a href="#35L" class="nv">kv</a><span class="p">.</span><span class="vi">second</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="38L" class="Ln">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="39L" class="Ln">            <span class="c">// TODO: Support more tags.</span></span>
<span id="40L" class="Ln">            <span class="k">throw</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/error/runtime_error" class="nc">runtime_error</a><span class="p">(</span></span>
<span id="41L" class="Ln">                <span class="s">"Unexpected XML tag in tagfile: "</span> <span class="p">+</span> <a href="#35L" class="nv">kv</a><span class="p">.</span><span class="vi">first</span><span class="p">)</span><span class="p">;</span></span>
<span id="42L" class="Ln">        <span class="p">}</span></span>
<span id="43L" class="Ln">    <span class="p">}</span></span>
<span id="44L" class="Ln"><span class="p">}</span></span>
<span id="45L" class="Ln"></span>
<span id="46L" class="Ln"><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><span class="def decl nf" id="synth::DoxytagResolver::fromTagFilename:const-fs::path&amp;,boost::string_ref">fromTagFilename</span><span class="p">(</span></span>
<span id="47L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">fname</span><span class="p">,</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nv">baseUrl</span><span class="p">)</span></span>
<span id="48L" class="Ln"><span class="p">{</span></span>
<span id="49L" class="Ln">    <a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nc">ptree</span> <span class="def decl nv">dom</span><span class="p">;</span></span>
<span id="50L" class="Ln">    <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">ifstream</span> <span class="def decl nv">file</span><span class="p">(</span><a href="#47L" class="nv">fname</a><span class="p">)</span><span class="p">;</span></span>
<span id="51L" class="Ln">    <span class="k">try</span> <span class="p">{</span></span>
<span id="52L" class="Ln">        <a href="#50L" class="nv">file</a><span class="p">.</span><span class="nf">exceptions</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">failbit</span> <span class="p">|</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">badbit</span><span class="p">)</span><span class="p">;</span></span>
<span id="53L" class="Ln">        <a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nf">read_xml</span><span class="p">(</span><a href="#50L" class="nv">file</a><span class="p">,</span> <a href="#49L" class="nv">dom</a><span class="p">,</span> <a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nn">xml_parser</span><span class="p">::</span><span class="vg">no_comments</span><span class="p">)</span><span class="p">;</span></span>
<span id="54L" class="Ln">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/failure" class="nc">failure</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">e</span><span class="p">)</span> <span class="p">{</span></span>
<span id="55L" class="Ln">        <span class="k">throw</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/error/runtime_error" class="nc">runtime_error</a><span class="p">(</span></span>
<span id="56L" class="Ln">            <span class="s">"Error reading tag file "</span> <span class="p">+</span> <a href="#47L" class="nv">fname</a><span class="p">.</span><span class="nf">string</span><span class="p">(</span><span class="p">)</span> <span class="p">+</span> <span class="s">": "</span> <span class="p">+</span> <a href="#54L" class="nv">e</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/error/exception/what" class="nf">what</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="57L" class="Ln">    <span class="p">}</span></span>
<span id="58L" class="Ln">    <span class="k">return</span> <a href="#synth::DoxytagResolver::DoxytagResolver:const-ptree::ptree&amp;,boost::string_ref" class="p">{</a><a href="#49L" class="nv">dom</a><span class="p">,</span> <a href="#47L" class="nv">baseUrl</a><span class="p">}</span><span class="p">;</span></span>
<span id="59L" class="Ln"><span class="p">}</span></span>
<span id="60L" class="Ln"></span>
<span id="61L" class="Ln"><span class="kt">void</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><span class="def decl nf" id="synth::DoxytagResolver::link:synth::Markup&amp;,CXCursor">link</span><span class="p">(</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a> <span class="p">&amp;</span> <span class="def decl nv">m</span><span class="p">,</span> <a href="../lib-llvm/include/clang-c/Index.h.html#2385L" class="nc">CXCursor</a> <span class="def decl nv">cur</span><span class="p">)</span></span>
<span id="62L" class="Ln"><span class="p">{</span></span>
<span id="63L" class="Ln">    <a href="../lib-llvm/include/clang-c/Index.h.html#2385L" class="nc">CXCursor</a> <span class="def decl nv">refd</span> <span class="p">=</span> <a href="../lib-llvm/include/clang-c/Index.h.html#clang_getCursorReferenced:CXCursor" class="nf">clang_getCursorReferenced</a><span class="p">(</span><a href="#61L" class="nv">cur</a><span class="p">)</span><span class="p">;</span></span>
<span id="64L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="xref.hpp.html#synth::isNamespaceLevelDeclaration:CXCursor" class="nf">isNamespaceLevelDeclaration</a><span class="p">(</span><a href="#63L" class="nv">refd</a><span class="p">)</span><span class="p">)</span></span>
<span id="65L" class="Ln">        <span class="k">return</span><span class="p">;</span></span>
<span id="66L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">doxyName</span> <span class="p">=</span> <a href="xref.hpp.html#synth::simpleQualifiedName:CXCursor" class="nf">simpleQualifiedName</a><span class="p">(</span><a href="#63L" class="nv">refd</a><span class="p">)</span><span class="p">;</span></span>
<span id="67L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">it</span> <span class="p">=</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::m_dsts" class="vi">m_dsts</a><span class="p">.</span><span class="nf">find</span><span class="p">(</span><a href="#66L" class="nv">doxyName</a><span class="p">)</span><span class="p">;</span></span>
<span id="68L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#67L" class="nv">it</a> <span class="p">==</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::m_dsts" class="vi">m_dsts</a><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="p">)</span><span class="p">)</span></span>
<span id="69L" class="Ln">        <span class="k">return</span><span class="p">;</span></span>
<span id="70L" class="Ln">    <a href="#61L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::refd" class="vi">refd</a> <span class="p">=</span> <span class="p">[</span><span class="p">&amp;</span><a href="#70L" class="nv">dst</a> <span class="p">=</span> it<span class="p">-></span>second<span class="p">,</span> <span class="p">&amp;</span><a href="#70L" class="nv">baseUrl</a> <span class="p">=</span> m_baseUrl<span class="p">]</span> <span class="p">(</span></span>
<span id="71L" class="Ln">        <a href="output.hpp.html#14L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="kd">const</span><span class="p">&amp;</span><span class="def decl p">,</span> <a href="output.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a><span class="p">&amp;</span><span class="def decl p">)</span></span>
<span id="72L" class="Ln">    <span class="p">{</span></span>
<span id="73L" class="Ln">        <span class="k">return</span> <a href="#70L" class="nv">baseUrl</a> <span class="p">+</span> <a href="#70L" class="nv">dst</a><span class="p">;</span></span>
<span id="74L" class="Ln">    <span class="p">}</span><span class="p">;</span></span>
<span id="75L" class="Ln"><span class="p">}</span></span>
<span id="76L" class="Ln"></span>
<span id="77L" class="Ln"><span class="kt">void</span> <a href="xref.hpp.html#synth" class="nn">synth</a><span class="p">::</span><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><span class="def decl nf" id="synth::DoxytagResolver::parseCompound:const-ptree::ptree&amp;,const-std::string&amp;">parseCompound</span><span class="p">(</span></span>
<span id="78L" class="Ln">    <a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nc">ptree</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">compound</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">prefix</span><span class="p">)</span></span>
<span id="79L" class="Ln"><span class="p">{</span></span>
<span id="80L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="kd">const</span><span class="p">*</span> <span class="def decl nv">name</span> <span class="p">=</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::addTag:const-ptree::ptree&amp;,const-std::string&amp;" class="nf">addTag</a><span class="p">(</span><a href="#78L" class="nv">compound</a><span class="p">,</span> <a href="#78L" class="nv">prefix</a><span class="p">)</span><span class="p">;</span></span>
<span id="81L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nv">compoundName</span> <span class="p">=</span> <a href="#80L" class="nv">name</a> <span class="p">?</span> <a href="#78L" class="nv">prefix</a> <span class="p">+</span> <span class="o">*</span><a href="#80L" class="nv">name</a> <span class="p">+</span> <span class="s">"::"</span> <span class="p">:</span> <a href="#78L" class="nv">prefix</a><span class="p">;</span></span>
<span id="82L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">kv</span> <a href="#82L" class="p">:</a> <a href="#78L" class="nv">compound</a><span class="p">)</span> <span class="p">{</span></span>
<span id="83L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#82L" class="nv">kv</a><span class="p">.</span><span class="vi">first</span> <span class="p">==</span> <span class="s">"member"</span><span class="p">)</span> <span class="p">{</span></span>
<span id="84L" class="Ln">            <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::addTag:const-ptree::ptree&amp;,const-std::string&amp;" class="nf">addTag</a><span class="p">(</span><a href="#82L" class="nv">kv</a><span class="p">.</span><span class="vi">second</span><span class="p">,</span> <a href="#81L" class="nv">compoundName</a><span class="p">)</span><span class="p">;</span></span>
<span id="85L" class="Ln">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#82L" class="nv">kv</a><span class="p">.</span><span class="vi">first</span> <span class="p">==</span> <span class="s">"compound"</span><span class="p">)</span> <span class="p">{</span></span>
<span id="86L" class="Ln">            <a href="#synth::DoxytagResolver::parseCompound:const-ptree::ptree&amp;,const-std::string&amp;" class="nf">parseCompound</a><span class="p">(</span><a href="#82L" class="nv">kv</a><span class="p">.</span><span class="vi">second</span><span class="p">,</span> <a href="#81L" class="nv">compoundName</a><span class="p">)</span><span class="p">;</span></span>
<span id="87L" class="Ln">        <span class="p">}</span></span>
<span id="88L" class="Ln">    <span class="p">}</span></span>
<span id="89L" class="Ln"><span class="p">}</span></span>
<span id="90L" class="Ln"></span>
<span id="91L" class="Ln"><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="kd">const</span><span class="p">*</span> <a href="xref.hpp.html#synth" class="nn">synth</a><span class="p">::</span><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><span class="def decl nf" id="synth::DoxytagResolver::addTag:const-ptree::ptree&amp;,const-std::string&amp;">addTag</span><span class="p">(</span></span>
<span id="92L" class="Ln">    <a href="DoxytagResolver.hpp.html#15L" class="nn">ptree</a><span class="p">::</span><span class="nc">ptree</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">tag</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">prefix</span><span class="p">)</span></span>
<span id="93L" class="Ln"><span class="p">{</span></span>
<span id="94L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">name</span> <span class="p">=</span> <a href="#92L" class="nv">tag</a><span class="p">.</span><span class="nf">get_optional</span><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">></span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span><span class="p">;</span></span>
<span id="95L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">!</span><a href="#94L" class="nv">name</a><span class="p">)</span></span>
<span id="96L" class="Ln">        <span class="k">return</span> <span class="kc">nullptr</span><span class="p">;</span></span>
<span id="97L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">url</span> <span class="p">=</span> <a href="#getUrl:const-ptree::ptree&amp;" class="nf">getUrl</a><span class="p">(</span><a href="#92L" class="nv">tag</a><span class="p">)</span><span class="p">;</span></span>
<span id="98L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="p">!</span><a href="#97L" class="nv">url</a><span class="p">)</span></span>
<span id="99L" class="Ln">        <span class="k">return</span> <span class="kc">nullptr</span><span class="p">;</span></span>
<span id="100L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nv">qname</span> <span class="p">=</span> <a href="#94L" class="nv">name</a><span class="p">-></span><span class="nf">find</span><span class="p">(</span><span class="sc">':'</span><span class="p">)</span> <span class="o">!=</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a><span class="p">::</span><span class="vc">npos</span></span>
<span id="101L" class="Ln">        <span class="p">?</span> <span class="p">*</span><a href="#94L" class="nv">name</a> <span class="p">:</span> <a href="#92L" class="nv">prefix</a> <span class="p">+</span> <span class="p">*</span><a href="#94L" class="nv">name</a><span class="p">;</span></span>
<span id="102L" class="Ln">    <span class="kd">auto</span> <span class="def decl nv">insRes</span> <span class="p">=</span> <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::m_dsts" class="vi">m_dsts</a><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="p">{</span> <a href="#100L" class="nv">qname</a><span class="p">,</span> <span class="p">*</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">move</span><span class="p">(</span><a href="#97L" class="nv">url</a><span class="p">)</span> <span class="p">}</span><span class="p">)</span><span class="p">;</span></span>
<span id="103L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#102L" class="nv">insRes</a><span class="p">.</span><span class="vi">second</span><span class="p">)</span></span>
<span id="104L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a> <span class="p">&lt;&lt;</span> <span class="s">"Duplicate doxytag ignored: "</span> <span class="p">&lt;&lt;</span> <a href="#94L" class="nv">name</a> <span class="p">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span></span>
<span id="105L" class="Ln">    <span class="k">return</span> <span class="o">&amp;</span><a href="#102L" class="nv">insRes</a><span class="p">.</span><span class="vi">first</span><span class="p">-></span><span class="vi">first</span><span class="p">;</span></span>
<span id="106L" class="Ln"><span class="p">}</span></span>
<span id="107L" class="Ln"></span>
<span id="108L" class="Ln"></span>
</pre></div>
        <script src="../code.js"></script>
    </body>
</html>
