<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>src/main.cpp</title>
        <link rel="stylesheet" href="../codestyle-colorful.css">
    </head>
    <body>
        <div class="highlight"><pre><span id="1L" class="Ln"><a href="CgStr.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"CgStr.hpp"</span></a></span>
<span id="2L" class="Ln"><a href="DoxytagResolver.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"DoxytagResolver.hpp"</span></a></span>
<span id="3L" class="Ln"><a href="MultiTuProcessor.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"MultiTuProcessor.hpp"</span></a></span>
<span id="4L" class="Ln"><a href="SimpleTemplate.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"SimpleTemplate.hpp"</span></a></span>
<span id="5L" class="Ln"><a href="annotate.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"annotate.hpp"</span></a></span>
<span id="6L" class="Ln"><a href="cgWrappers.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"cgWrappers.hpp"</span></a></span>
<span id="7L" class="Ln"><a href="cmdline.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"cmdline.hpp"</span></a></span>
<span id="8L" class="Ln"></span>
<span id="9L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">filesystem</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="10L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">io</span><span class="cpf">/</span><span class="cpf">ios_state</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="11L" class="Ln"></span>
<span id="12L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">condition_variable</span><span class="cpf">></span></span>
<span id="13L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">fstream</span><span class="cpf">></span></span>
<span id="14L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">iomanip</span><span class="cpf">></span></span>
<span id="15L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">iostream</span><span class="cpf">></span></span>
<span id="16L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">sstream</span><span class="cpf">></span></span>
<span id="17L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">thread</span><span class="cpf">></span></span>
<span id="18L" class="Ln"></span>
<span id="19L" class="Ln"><span class="kd">using</span> <span class="kd">namespace</span> <a href="CgStr.hpp.html#synth" class="nn">synth</a>;</span>
<span id="20L" class="Ln"></span>
<span id="21L" class="Ln"><span class="kd">static</span> <span class="kt">char</span> <span class="kd">const</span> <span class="def decl vg" id="kDefaultTemplateText">kDefaultTemplateText</span><span class="p">[</span><span class="p">]</span> <span class="p">=</span></span>
<span id="22L" class="Ln"><span class="s">R"EOT(&lt;!DOCTYPE html></span></span>
<span id="23L" class="Ln"><span class="s">&lt;html></span></span>
<span id="24L" class="Ln"><span class="s">    &lt;head></span></span>
<span id="25L" class="Ln"><span class="s">        &lt;meta charset="utf-8"></span></span>
<span id="26L" class="Ln"><span class="s">        &lt;meta name="viewport" content="width=device-width"></span></span>
<span id="27L" class="Ln"><span class="s">        &lt;title>@@filename@@&lt;/title></span></span>
<span id="28L" class="Ln"><span class="s">        &lt;link rel="stylesheet" href="@@rootpath@@/code.css"></span></span>
<span id="29L" class="Ln"><span class="s">    &lt;/head></span></span>
<span id="30L" class="Ln"><span class="s">    &lt;body></span></span>
<span id="31L" class="Ln"><span class="s">        &lt;div class="highlight">&lt;pre>@@code@@&lt;/pre>&lt;/div></span></span>
<span id="32L" class="Ln"><span class="s">        &lt;script src="@@rootpath@@/code.js">&lt;/script></span></span>
<span id="33L" class="Ln"><span class="s">    &lt;/body></span></span>
<span id="34L" class="Ln"><span class="s">&lt;/html>)EOT"</span>;</span>
<span id="35L" class="Ln"></span>
<span id="36L" class="Ln"><span class="kd">namespace</span> <span class="p">{</span></span>
<span id="37L" class="Ln"></span>
<span id="38L" class="Ln"><span class="kd">struct</span> <span class="def decl nc" id="InitialPathResetter">InitialPathResetter</span> <span class="p">{</span></span>
<span id="39L" class="Ln">    <span class="def decl " id="InitialPathResetter::~InitialPathResetter"><span class="p">~</span><span class="nf">InitialPathResetter</span></span><span class="p">(</span><span class="p">)</span> <span class="p">{</span></span>
<span id="40L" class="Ln">        <span class="nn">boost</span><span class="p">::</span><span class="nn">system</span><span class="p">::</span><span class="nc">error_code</span> <span class="def decl nv">ec</span><span class="p">;</span></span>
<span id="41L" class="Ln">        <a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nf">current_path</span><span class="p">(</span><a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nf">initial_path</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#40L" class="nv">ec</a><span class="p">)</span><span class="p">;</span></span>
<span id="42L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#40L" class="nv">ec</a><span class="p">)</span> <span class="p">{</span></span>
<span id="43L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">cerr</a> <span class="p">&lt;&lt;</span> <span class="s">"Failed resetting working directory: "</span> <span class="p">&lt;&lt;</span> <a href="#40L" class="nv">ec</a><span class="p">;</span></span>
<span id="44L" class="Ln">        <span class="p">}</span></span>
<span id="45L" class="Ln">    <span class="p">}</span></span>
<span id="46L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="47L" class="Ln"></span>
<span id="48L" class="Ln"><span class="kd">struct</span> <span class="def decl nc" id="ThreadSharedState">ThreadSharedState</span> <span class="p">{</span></span>
<span id="49L" class="Ln">    <a href="../lib-llvm/include/clang-c/Index.h.html#CXIndex" class="nc">CXIndex</a> <span class="def decl vi" id="ThreadSharedState::cidx">cidx</span><span class="p">;</span></span>
<span id="50L" class="Ln">    <a href="MultiTuProcessor.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a><span class="p">&amp;</span> <span class="def decl vi" id="ThreadSharedState::multiTuProcessor">multiTuProcessor</span><span class="p">;</span></span>
<span id="51L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a> <span class="def decl vi" id="ThreadSharedState::workingDirMut">workingDirMut</span><span class="p">;</span></span>
<span id="52L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a> <span class="def decl vi" id="ThreadSharedState::outputMut">outputMut</span><span class="p">;</span></span>
<span id="53L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/condition_variable" class="nc">condition_variable</a> <span class="def decl vi" id="ThreadSharedState::workingDirChangedOrFree">workingDirChangedOrFree</span><span class="p">;</span></span>
<span id="54L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl vi" id="ThreadSharedState::nWorkingDirUsers">nWorkingDirUsers</span><span class="p">;</span></span>
<span id="55L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">atomic_bool</span> <span class="def decl vi" id="ThreadSharedState::cancel">cancel</span><span class="p">;</span></span>
<span id="56L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="57L" class="Ln"></span>
<span id="58L" class="Ln"><span class="kd">class</span> <span class="def decl nc" id="UIntRef">UIntRef</span> <span class="p">{</span></span>
<span id="59L" class="Ln"><span class="kd">public</span><span class="p">:</span></span>
<span id="60L" class="Ln">    <span class="def decl nf" id="UIntRef::UIntRef:unsigned-int&amp;,std::condition_variable&amp;,std::mutex&amp;">UIntRef</span><span class="p">(</span></span>
<span id="61L" class="Ln">        <span class="kt">unsigned</span><span class="p">&amp;</span> <span class="def decl nv">refd</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/condition_variable" class="nc">condition_variable</a><span class="p">&amp;</span> <span class="def decl nv">zeroSignal</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">&amp;</span> <span class="def decl nv">mut</span><span class="p">)</span></span>
<span id="62L" class="Ln">        <span class="p">:</span> <a href="#UIntRef::m_refd" class="vi">m_refd</a><span class="p">(</span><a href="#61L" class="nv">refd</a><span class="p">)</span></span>
<span id="63L" class="Ln">        <span class="p">,</span> <a href="#UIntRef::m_zeroSignal" class="vi">m_zeroSignal</a><span class="p">(</span><a href="#61L" class="nv">zeroSignal</a><span class="p">)</span></span>
<span id="64L" class="Ln">        <span class="p">,</span> <a href="#UIntRef::m_mut" class="vi">m_mut</a><span class="p">(</span><a href="#61L" class="nv">mut</a><span class="p">)</span></span>
<span id="65L" class="Ln">        <span class="p">,</span> <a href="#UIntRef::m_acquired" class="vi">m_acquired</a><span class="p">(</span><span class="kc">false</span><span class="p">)</span></span>
<span id="66L" class="Ln">    <span class="p">{</span> <span class="p">}</span></span>
<span id="67L" class="Ln"></span>
<span id="68L" class="Ln">    <span class="c">// Note: The referenced unsigned must be syncronized by the caller.</span></span>
<span id="69L" class="Ln">    <span class="kt">void</span> <span class="def decl nf" id="UIntRef::acquire">acquire</span><span class="p">(</span><span class="p">)</span></span>
<span id="70L" class="Ln">    <span class="p">{</span></span>
<span id="71L" class="Ln">        <span class="cp">assert</span>(<span class="o">!</span><a href="#UIntRef::m_acquired" class="vi">m_acquired</a>)<span class="p">;</span></span>
<span id="72L" class="Ln">        <span class="o">++</span><a href="#UIntRef::m_refd" class="vi">m_refd</a><span class="p">;</span></span>
<span id="73L" class="Ln">        <a href="#UIntRef::m_acquired" class="vi">m_acquired</a> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="74L" class="Ln">    <span class="p">}</span></span>
<span id="75L" class="Ln"></span>
<span id="76L" class="Ln">    <span class="def decl " id="UIntRef::~UIntRef"><span class="p">~</span><span class="nf">UIntRef</span></span><span class="p">(</span><span class="p">)</span></span>
<span id="77L" class="Ln">    <span class="p">{</span></span>
<span id="78L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#UIntRef::m_acquired" class="vi">m_acquired</a><span class="p">)</span> <span class="p">{</span></span>
<span id="79L" class="Ln">            <span class="kt">bool</span> <span class="def decl nv">zeroReached</span><span class="p">;</span></span>
<span id="80L" class="Ln">            <span class="p">{</span></span>
<span id="81L" class="Ln">                <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/lock_guard" class="nc">lock_guard</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">></span> <span class="def decl nv">lock</span><span class="p">(</span><a href="#UIntRef::m_mut" class="vi">m_mut</a><span class="p">)</span><span class="p">;</span></span>
<span id="82L" class="Ln">                <a href="#79L" class="nv">zeroReached</a> <span class="o">=</span> <span class="o">--</span><a href="#UIntRef::m_refd" class="vi">m_refd</a> <span class="o">==</span> <span class="m">0</span><span class="p">;</span></span>
<span id="83L" class="Ln">            <span class="p">}</span></span>
<span id="84L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#79L" class="nv">zeroReached</a><span class="p">)</span></span>
<span id="85L" class="Ln">                <a href="#UIntRef::m_zeroSignal" class="vi">m_zeroSignal</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all" class="nf">notify_all</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="86L" class="Ln">        <span class="p">}</span></span>
<span id="87L" class="Ln">    <span class="p">}</span></span>
<span id="88L" class="Ln"></span>
<span id="89L" class="Ln"><span class="kd">private</span><span class="p">:</span></span>
<span id="90L" class="Ln">    <span class="kt">unsigned</span><span class="p">&amp;</span> <span class="def decl vi" id="UIntRef::m_refd">m_refd</span><span class="p">;</span></span>
<span id="91L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/condition_variable" class="nc">condition_variable</a><span class="p">&amp;</span> <span class="def decl vi" id="UIntRef::m_zeroSignal">m_zeroSignal</span><span class="p">;</span></span>
<span id="92L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">&amp;</span> <span class="def decl vi" id="UIntRef::m_mut">m_mut</span><span class="p">;</span></span>
<span id="93L" class="Ln">    <span class="kt">bool</span> <span class="def decl vi" id="UIntRef::m_acquired">m_acquired</span><span class="p">;</span></span>
<span id="94L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="95L" class="Ln"></span>
<span id="96L" class="Ln"><span class="p">}</span> <span class="c">// anonyomous namespace</span></span>
<span id="97L" class="Ln"></span>
<span id="98L" class="Ln"><span class="kd">static</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a><span class="p">></span> <span class="def decl nf" id="getClArgs:CXCompileCommand">getClArgs</span><span class="p">(</span><a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#CXCompileCommand" class="nc">CXCompileCommand</a> <span class="def decl nv">cmd</span><span class="p">)</span></span>
<span id="99L" class="Ln"><span class="p">{</span></span>
<span id="100L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a><span class="p">></span> <span class="def decl nv">result</span><span class="p">;</span></span>
<span id="101L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl nv">nArgs</span> <span class="p">=</span> <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommand_getNumArgs:CXCompileCommand" class="nf">clang_CompileCommand_getNumArgs</a><span class="p">(</span><a href="#98L" class="nv">cmd</a><span class="p">)</span><span class="p">;</span></span>
<span id="102L" class="Ln">    <a href="#100L" class="nv">result</a><span class="p">.</span><span class="nf">reserve</span><span class="p">(</span><a href="#101L" class="nv">nArgs</a><span class="p">)</span><span class="p">;</span></span>
<span id="103L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="def decl nv">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <a href="#103L" class="nv">i</a> <span class="o">&lt;</span> <a href="#101L" class="nv">nArgs</a><span class="p">;</span> <span class="o">++</span><a href="#103L" class="nv">i</a><span class="p">)</span></span>
<span id="104L" class="Ln">        <a href="#100L" class="nv">result</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommand_getArg:CXCompileCommand,unsigned-int" class="nf">clang_CompileCommand_getArg</a><span class="p">(</span><a href="#98L" class="nv">cmd</a><span class="p">,</span> <a href="#103L" class="nv">i</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="105L" class="Ln">    <span class="k">return</span> <a href="#100L" class="nv">result</a><span class="p">;</span></span>
<span id="106L" class="Ln"><span class="p">}</span></span>
<span id="107L" class="Ln"></span>
<span id="108L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="processCompileCommand:CXCompileCommand,std::vector<const-char*>,float,(anonymous-namespace)::ThreadSharedState&amp;">processCompileCommand</span><span class="p">(</span></span>
<span id="109L" class="Ln">    <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#CXCompileCommand" class="nc">CXCompileCommand</a> <span class="def decl nv">cmd</span><span class="p">,</span></span>
<span id="110L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><span class="kt">char</span> <span class="kd">const</span><span class="p">*</span><span class="p">></span> <span class="def decl nv">extraArgs</span><span class="p">,</span></span>
<span id="111L" class="Ln">    <span class="kt">float</span> <span class="def decl nv">pct</span><span class="p">,</span></span>
<span id="112L" class="Ln">    <a href="#ThreadSharedState" class="nc">ThreadSharedState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">)</span></span>
<span id="113L" class="Ln"><span class="p">{</span></span>
<span id="114L" class="Ln">    <a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a> <span class="def decl nv">file</span><span class="p">(</span><a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommand_getFilename:CXCompileCommand" class="nf">clang_CompileCommand_getFilename</a><span class="p">(</span><a href="#109L" class="nv">cmd</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="115L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#114L" class="nv">file</a><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::empty" class="nf">empty</a><span class="p">(</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::multiTuProcessor" class="vi">multiTuProcessor</a><span class="p">.</span><a href="MultiTuProcessor.hpp.html#synth::MultiTuProcessor::isFileIncluded:const-fs::path&amp;" class="nf">isFileIncluded</a><span class="p">(</span><a href="#114L" class="nv">file</a><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::get" class="nf">get</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span></span>
<span id="116L" class="Ln">        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="117L" class="Ln"></span>
<span id="118L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a><span class="p">></span> <span class="def decl nv">clArgsHandles</span> <span class="p">=</span> <a href="#getClArgs:CXCompileCommand" class="nf">getClArgs</a><span class="p">(</span><a href="#109L" class="nv">cmd</a><span class="p">)</span><span class="p">;</span></span>
<span id="119L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><span class="kt">char</span> <span class="kd">const</span><span class="p">*</span><span class="p">></span> <span class="def decl nv">clArgs</span><span class="p">;</span></span>
<span id="120L" class="Ln">    <a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">reserve</span><span class="p">(</span><a href="#118L" class="nv">clArgsHandles</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span> <span class="o">+</span> <a href="#110L" class="nv">extraArgs</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="121L" class="Ln">    <span class="k">for</span> <span class="p">(</span><a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">s</span> <a href="#121L" class="p">:</a> <a href="#118L" class="nv">clArgsHandles</a><span class="p">)</span></span>
<span id="122L" class="Ln">        <a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="#121L" class="nv">s</a><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::get" class="nf">get</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="123L" class="Ln">    <a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#110L" class="nv">extraArgs</a><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#110L" class="nv">extraArgs</a><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="124L" class="Ln">    <a href="CgStr.hpp.html#synth::CgStr" class="nc">CgStr</a> <span class="def decl nv">dirStr</span> <span class="p">=</span> <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommand_getDirectory:CXCompileCommand" class="nf">clang_CompileCommand_getDirectory</a><span class="p">(</span><a href="#109L" class="nv">cmd</a><span class="p">)</span><span class="p">;</span></span>
<span id="125L" class="Ln">    <a href="#UIntRef" class="nc">UIntRef</a> <span class="def decl nv">dirRef</span><span class="p">(</span></span>
<span id="126L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::nWorkingDirUsers" class="vi">nWorkingDirUsers</a><span class="p">,</span></span>
<span id="127L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::workingDirChangedOrFree" class="vi">workingDirChangedOrFree</a><span class="p">,</span></span>
<span id="128L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::workingDirMut" class="vi">workingDirMut</a><span class="p">)</span><span class="p">;</span></span>
<span id="129L" class="Ln"></span>
<span id="130L" class="Ln">    <span class="kt">bool</span> <span class="def decl nv">dirChanged</span> <span class="p">=</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="131L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#124L" class="nv">dirStr</a><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::empty" class="nf">empty</a><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="132L" class="Ln">        <a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nc">path</span> <span class="def decl nv">dir</span> <span class="p">=</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">move</span><span class="p">(</span><a href="#124L" class="nv">dirStr</a><span class="p">)</span><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::gets" class="nf">gets</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="133L" class="Ln">        <span class="kt">bool</span> <span class="def decl nv">dirOk</span><span class="p">;</span></span>
<span id="134L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/unique_lock" class="nc">unique_lock</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">></span> <span class="def decl nv">lock</span><span class="p">(</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::workingDirMut" class="vi">workingDirMut</a><span class="p">)</span><span class="p">;</span></span>
<span id="135L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::workingDirChangedOrFree" class="vi">workingDirChangedOrFree</a><span class="p">.</span><span class="nf">wait</span><span class="p">(</span><a href="#134L" class="nv">lock</a><span class="p">,</span> <span class="p">[</span><span class="p">&amp;</span><span class="p">]</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span></span>
<span id="136L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::cancel" class="vi">cancel</a><span class="p">)</span></span>
<span id="137L" class="Ln">                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="138L" class="Ln">            <a href="#133L" class="nv">dirOk</a> <span class="o">=</span> <a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nf">current_path</span><span class="p">(</span><span class="p">)</span> <span class="p">==</span> <a href="#132L" class="nv">dir</a><span class="p">;</span></span>
<span id="139L" class="Ln">            <span class="k">return</span> <a href="#133L" class="nv">dirOk</a> <span class="o">||</span> <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::nWorkingDirUsers" class="vi">nWorkingDirUsers</a> <span class="o">==</span> <span class="m">0</span><span class="p">;</span></span>
<span id="140L" class="Ln">        <span class="p">}</span><span class="p">)</span><span class="p">;</span></span>
<span id="141L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::cancel" class="vi">cancel</a><span class="p">)</span></span>
<span id="142L" class="Ln">            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="143L" class="Ln">        <a href="#125L" class="nv">dirRef</a><span class="p">.</span><a href="#UIntRef::acquire" class="nf">acquire</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="144L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#133L" class="nv">dirOk</a><span class="p">)</span> <span class="p">{</span></span>
<span id="145L" class="Ln">            <a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nf">current_path</span><span class="p">(</span><a href="#132L" class="nv">dir</a><span class="p">)</span><span class="p">;</span></span>
<span id="146L" class="Ln">            <a href="#130L" class="nv">dirChanged</a> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="147L" class="Ln">        <span class="p">}</span></span>
<span id="148L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="149L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/lock_guard" class="nc">lock_guard</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">></span> <span class="def decl nv">lock</span><span class="p">(</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::workingDirMut" class="vi">workingDirMut</a><span class="p">)</span><span class="p">;</span></span>
<span id="150L" class="Ln">        <a href="#125L" class="nv">dirRef</a><span class="p">.</span><a href="#UIntRef::acquire" class="nf">acquire</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="151L" class="Ln">    <span class="p">}</span></span>
<span id="152L" class="Ln"></span>
<span id="153L" class="Ln">    <span class="p">{</span></span>
<span id="154L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/lock_guard" class="nc">lock_guard</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">></span> <span class="def decl nv">lock</span><span class="p">(</span><a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::outputMut" class="vi">outputMut</a><span class="p">)</span><span class="p">;</span></span>
<span id="155L" class="Ln"></span>
<span id="156L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#130L" class="nv">dirChanged</a><span class="p">)</span></span>
<span id="157L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a> <span class="p">&lt;&lt;</span> <span class="s">"Entered directory "</span> <span class="p">&lt;&lt;</span> <a href="#124L" class="nv">dirStr</a><span class="p">.</span><a href="CgStr.hpp.html#synth::CgStr::get" class="nf">get</a><span class="p">(</span><span class="p">)</span> <span class="p">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span></span>
<span id="158L" class="Ln">        <span class="nn">boost</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="nc">ios_all_saver</span> <span class="def decl nv">saver</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a><span class="p">)</span><span class="p">;</span></span>
<span id="159L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/flags" class="nf">flags</a><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/flags" class="nf">flags</a><span class="p">(</span><span class="p">)</span> <span class="p">|</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">fixed</span><span class="p">)</span><span class="p">;</span></span>
<span id="160L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/precision" class="nf">precision</a><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="p">;</span></span>
<span id="161L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a> <span class="p">&lt;&lt;</span> <span class="sc">'['</span> <span class="p">&lt;&lt;</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/manip/setw" class="nf">setw</a><span class="p">(</span><span class="m">6</span><span class="p">)</span> <span class="p">&lt;&lt;</span> <a href="#111L" class="nv">pct</a> <span class="p">&lt;&lt;</span> <span class="s">"%]: "</span> <a href="CgStr.hpp.html#synth::operator<<:std::ostream&amp;,const-synth::CgStr&amp;" class="p">&lt;&lt;</a> <a href="#114L" class="nv">file</a> <span class="p">&lt;&lt;</span> <span class="s">"...\n"</span><span class="p">;</span></span>
<span id="162L" class="Ln">    <span class="p">}</span></span>
<span id="163L" class="Ln"></span>
<span id="164L" class="Ln"></span>
<span id="165L" class="Ln">    <span class="k">return</span> <a href="annotate.hpp.html#synth::processTu:CXIndex,synth::MultiTuProcessor&amp;,const-char*const*,int" class="nf">processTu</a><span class="p">(</span></span>
<span id="166L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::cidx" class="vi">cidx</a><span class="p">,</span></span>
<span id="167L" class="Ln">        <a href="#112L" class="nv">state</a><span class="p">.</span><a href="#ThreadSharedState::multiTuProcessor" class="vi">multiTuProcessor</a><span class="p">,</span></span>
<span id="168L" class="Ln">        <a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">data</span><span class="p">(</span><span class="p">)</span><span class="p">,</span></span>
<span id="169L" class="Ln">        <span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">></span><span class="p">(</span><a href="#119L" class="nv">clArgs</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span> <span class="o">==</span> <span class="cp">EXIT_SUCCESS</span><span class="p">;</span></span>
<span id="170L" class="Ln"><span class="p">}</span></span>
<span id="171L" class="Ln"></span>
<span id="172L" class="Ln"><span class="c">// Adapted from</span></span>
<span id="173L" class="Ln"><span class="c">// http://insanecoding.blogspot.co.at/2011/11/how-to-read-in-file-in-c.html</span></span>
<span id="174L" class="Ln"><span class="kd">static</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nf" id="getFileContents:const-char*">getFileContents</span><span class="p">(</span><span class="kt">char</span> <span class="kd">const</span><span class="p">*</span> <span class="def decl nv">fname</span><span class="p">)</span></span>
<span id="175L" class="Ln"><span class="p">{</span></span>
<span id="176L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ifstream" class="nc">ifstream</a> <span class="def decl nv">in</span><span class="p">(</span><a href="#174L" class="nv">fname</a><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">in</span> <span class="p">|</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">binary</span><span class="p">)</span><span class="p">;</span></span>
<span id="177L" class="Ln">    <a href="#176L" class="nv">in</a><span class="p">.</span><span class="nf">exceptions</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">badbit</span><span class="p">)</span><span class="p">;</span></span>
<span id="178L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostringstream" class="nc">ostringstream</a> <span class="def decl nv">contents</span><span class="p">;</span></span>
<span id="179L" class="Ln">    <a href="#178L" class="nv">contents</a> <span class="p">&lt;&lt;</span> <a href="#176L" class="nv">in</a><span class="p">.</span><span class="nf">rdbuf</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="180L" class="Ln">    <span class="k">return</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">move</span><span class="p">(</span><a href="#178L" class="nv">contents</a><span class="p">)</span><span class="p">.</span><span class="nf">str</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="181L" class="Ln"><span class="p">}</span></span>
<span id="182L" class="Ln"></span>
<span id="183L" class="Ln"></span>
<span id="184L" class="Ln"><span class="kd">static</span> <span class="kt">int</span> <span class="def decl nf" id="executeCmdLine:const-synth::CmdLineArgs&amp;">executeCmdLine</span><span class="p">(</span><a href="cmdline.hpp.html#synth::CmdLineArgs" class="nc">CmdLineArgs</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">args</span><span class="p">)</span></span>
<span id="185L" class="Ln"><span class="p">{</span></span>
<span id="186L" class="Ln">    <a href="SimpleTemplate.hpp.html#synth::SimpleTemplate" class="nc">SimpleTemplate</a> <span class="def decl nv">tpl</span><span class="p">(</span><span class="s">""</span><span class="p">)</span><span class="p">;</span></span>
<span id="187L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::templateFile" class="vi">templateFile</a><span class="p">)</span> <span class="p">{</span></span>
<span id="188L" class="Ln">        <span class="k">try</span> <span class="p">{</span></span>
<span id="189L" class="Ln">            <a href="#186L" class="nv">tpl</a> <a href="SimpleTemplate.hpp.html#synth::SimpleTemplate" class="p">=</a> <a href="SimpleTemplate.hpp.html#synth::SimpleTemplate" class="nc">SimpleTemplate</a><span class="p">(</span><a href="#getFileContents:const-char*" class="nf">getFileContents</a><span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::templateFile" class="vi">templateFile</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="190L" class="Ln">        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/ios_base/failure" class="nc">failure</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">e</span><span class="p">)</span> <span class="p">{</span></span>
<span id="191L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">cerr</a> <span class="p">&lt;&lt;</span> <span class="s">"Error reading output template: "</span> <span class="p">&lt;&lt;</span> <a href="#190L" class="nv">e</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/error/exception/what" class="nf">what</a><span class="p">(</span><span class="p">)</span> <span class="p">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span></span>
<span id="192L" class="Ln">            <span class="k">return</span> <span class="cp">EXIT_FAILURE</span><span class="p">;</span></span>
<span id="193L" class="Ln">        <span class="p">}</span></span>
<span id="194L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="195L" class="Ln">        <a href="#186L" class="nv">tpl</a> <a href="SimpleTemplate.hpp.html#synth::SimpleTemplate" class="p">=</a> <a href="SimpleTemplate.hpp.html#synth::SimpleTemplate" class="nc">SimpleTemplate</a><span class="p">(</span><a href="#kDefaultTemplateText" class="vg">kDefaultTemplateText</a><span class="p">)</span><span class="p">;</span> </span>
<span id="196L" class="Ln">    <span class="p">}</span></span>
<span id="197L" class="Ln"></span>
<span id="198L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="MultiTuProcessor.hpp.html#synth::ExternalRefLinker" class="nc">ExternalRefLinker</a><span class="p">></span> <span class="def decl nv">refLinkers</span><span class="p">;</span></span>
<span id="199L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">doxyMapping</span> <a href="#199L" class="p">:</a> <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::doxyTagFiles" class="vi">doxyTagFiles</a><span class="p">)</span> <span class="p">{</span></span>
<span id="200L" class="Ln">        <a href="#198L" class="nv">refLinkers</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">bind</span><span class="p">(</span><span class="o">&amp;</span><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::link:synth::Markup&amp;,CXCursor" class="nf">link</a><span class="p">,</span></span>
<span id="201L" class="Ln">            <a href="DoxytagResolver.hpp.html#synth::DoxytagResolver" class="nc">DoxytagResolver</a><span class="p">::</span><a href="DoxytagResolver.hpp.html#synth::DoxytagResolver::fromTagFilename:const-fs::path&amp;,boost::string_ref" class="nf">fromTagFilename</a><span class="p">(</span></span>
<span id="202L" class="Ln">                <a href="#199L" class="nv">doxyMapping</a><span class="p">.</span><span class="vi">first</span><span class="p">,</span></span>
<span id="203L" class="Ln">                <a href="#199L" class="nv">doxyMapping</a><span class="p">.</span><span class="vi">second</span><span class="p">)</span><span class="p">,</span></span>
<span id="204L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/utility/functional/placeholders" class="nn">placeholders</a><span class="p">::</span><span class="vg">_1</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/utility/functional/placeholders" class="nn">placeholders</a><span class="p">::</span><span class="vg">_2</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="205L" class="Ln">    <span class="p">}</span></span>
<span id="206L" class="Ln"></span>
<span id="207L" class="Ln">    <a href="cgWrappers.hpp.html#synth::CgIdxHandle" class="nc">CgIdxHandle</a> <span class="def decl nv">hcidx</span><span class="p">(</span><a href="../lib-llvm/include/clang-c/Index.h.html#clang_createIndex:int,int" class="nf">clang_createIndex</a><span class="p">(</span></span>
<span id="208L" class="Ln">            <span class="c">/*excludeDeclarationsFromPCH:*/</span> <span class="kc">true</span><span class="p">,</span></span>
<span id="209L" class="Ln">            <span class="c">/*displayDiagnostics:*/</span> <span class="kc">true</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="210L" class="Ln"></span>
<span id="211L" class="Ln"></span>
<span id="212L" class="Ln">    <a href="MultiTuProcessor.hpp.html#synth::MultiTuProcessor" class="nc">MultiTuProcessor</a> <span class="def decl nv">state</span><span class="p">(</span></span>
<span id="213L" class="Ln">        <a href="MultiTuProcessor.hpp.html#synth::PathMap" class="nc">PathMap</a><span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::inOutDirs" class="vi">inOutDirs</a><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::inOutDirs" class="vi">inOutDirs</a><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">,</span> </span>
<span id="214L" class="Ln">        <span class="p">[</span><span class="p">&amp;</span><a href="#198L" class="nv">refLinkers</a><span class="p">]</span><span class="p">(</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">&amp;</span> <span class="def decl nv">m</span><span class="p">,</span> <a href="../lib-llvm/include/clang-c/Index.h.html#2385L" class="nc">CXCursor</a> <span class="def decl nv">c</span><span class="p">)</span> <span class="p">{</span></span>
<span id="215L" class="Ln">            <span class="cp">assert</span>(<span class="o">!</span><a href="#214L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::isRef" class="nf">isRef</a><span class="p">(</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="216L" class="Ln">            <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">refLinker</span> <a href="#216L" class="p">:</a> <a href="#198L" class="nv">refLinkers</a><span class="p">)</span> <span class="p">{</span></span>
<span id="217L" class="Ln">                <a href="#216L" class="nv">refLinker</a><span class="p">(</span><a href="#214L" class="nv">m</a><span class="p">,</span> <a href="#214L" class="nv">c</a><span class="p">)</span><span class="p">;</span></span>
<span id="218L" class="Ln">                <span class="k">if</span> <span class="p">(</span><a href="#214L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::isRef" class="nf">isRef</a><span class="p">(</span><span class="p">)</span><span class="p">)</span></span>
<span id="219L" class="Ln">                    <span class="k">break</span><span class="p">;</span></span>
<span id="220L" class="Ln">            <span class="p">}</span></span>
<span id="221L" class="Ln">        <span class="p">}</span><span class="p">)</span><span class="p">;</span></span>
<span id="222L" class="Ln">    <a href="#212L" class="nv">state</a><span class="p">.</span><a href="MultiTuProcessor.hpp.html#synth::MultiTuProcessor::setMaxIdSz:std::size_t" class="nf">setMaxIdSz</a><span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::maxIdSz" class="vi">maxIdSz</a><span class="p">)</span><span class="p">;</span></span>
<span id="223L" class="Ln"></span>
<span id="224L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::compilationDbDir" class="vi">compilationDbDir</a><span class="p">)</span> <span class="p">{</span></span>
<span id="225L" class="Ln">        <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#59L" class="nc">CXCompilationDatabase_Error</a> <span class="def decl nv">err</span><span class="p">;</span></span>
<span id="226L" class="Ln">        <a href="cgWrappers.hpp.html#synth::CgDbHandle" class="nc">CgDbHandle</a> <span class="def decl nv">db</span><span class="p">(</span><a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompilationDatabase_fromDirectory:const-char*,CXCompilationDatabase_Error*" class="nf">clang_CompilationDatabase_fromDirectory</a><span class="p">(</span></span>
<span id="227L" class="Ln">                <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::compilationDbDir" class="vi">compilationDbDir</a><span class="p">,</span> <span class="o">&amp;</span><a href="#225L" class="nv">err</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="228L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#225L" class="nv">err</a> <span class="o">!=</span> <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#CXCompilationDatabase_Error::CXCompilationDatabase_NoError" class="no">CXCompilationDatabase_NoError</a><span class="p">)</span> <span class="p">{</span></span>
<span id="229L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">cerr</a> <span class="p">&lt;&lt;</span> <span class="s">"Failed loading compilation database (code "</span></span>
<span id="230L" class="Ln">                      <span class="p">&lt;&lt;</span> <span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">></span><span class="p">(</span><a href="#225L" class="nv">err</a><span class="p">)</span></span>
<span id="231L" class="Ln">                      <span class="p">&lt;&lt;</span> <span class="s">")\n"</span><span class="p">;</span></span>
<span id="232L" class="Ln">            <span class="k">return</span> <a href="#225L" class="nv">err</a> <span class="o">+</span> <span class="m">20</span><span class="p">;</span></span>
<span id="233L" class="Ln">        <span class="p">}</span></span>
<span id="234L" class="Ln">        <a href="cgWrappers.hpp.html#synth::CgCmdsHandle" class="nc">CgCmdsHandle</a> <span class="def decl nv">cmds</span><span class="p">(</span></span>
<span id="235L" class="Ln">            <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompilationDatabase_getAllCompileCommands:CXCompilationDatabase" class="nf">clang_CompilationDatabase_getAllCompileCommands</a><span class="p">(</span><a href="#226L" class="nv">db</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="236L" class="Ln">        <span class="kt">unsigned</span> <span class="def decl nv">nCmds</span> <span class="p">=</span> <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommands_getSize:CXCompileCommands" class="nf">clang_CompileCommands_getSize</a><span class="p">(</span><a href="#234L" class="nv">cmds</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="237L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#236L" class="nv">nCmds</a> <span class="o">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span></span>
<span id="238L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">cerr</a> <span class="p">&lt;&lt;</span> <span class="s">"No compilation commands in DB.\n"</span><span class="p">;</span></span>
<span id="239L" class="Ln">            <span class="k">return</span> <span class="cp">EXIT_SUCCESS</span><span class="p">;</span></span>
<span id="240L" class="Ln">        <span class="p">}</span></span>
<span id="241L" class="Ln"></span>
<span id="242L" class="Ln">        <a href="#InitialPathResetter" class="nc">InitialPathResetter</a> <span class="def decl nv">pathResetter</span><span class="p">;</span></span>
<span id="243L" class="Ln">        <a href="#ThreadSharedState" class="nc">ThreadSharedState</a> <span class="def decl nv">tstate</span> <span class="p">{</span></span>
<span id="244L" class="Ln">            <span class="c">/*cidx=*/</span> <a href="#207L" class="nv">hcidx</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">,</span></span>
<span id="245L" class="Ln">            <span class="c">/*multiTuProcessor=*/</span> <a href="#212L" class="nv">state</a><span class="p">,</span></span>
<span id="246L" class="Ln">            <span class="c">/*workingDirMut=*/</span> <span class="p">{</span><span class="p">}</span><span class="p">,</span></span>
<span id="247L" class="Ln">            <span class="c">/*outputMut=*/</span> <span class="p">{</span><span class="p">}</span><span class="p">,</span></span>
<span id="248L" class="Ln">            <span class="c">/*workingDirChangedOrFree=*/</span> <span class="p">{</span><span class="p">}</span><span class="p">,</span></span>
<span id="249L" class="Ln">            <span class="c">/*nWorkingDirUsers=*/</span> <span class="mo">0u</span><span class="p">,</span></span>
<span id="250L" class="Ln">            <span class="c">/*cancel=*/</span> <span class="p">{</span><span class="kc">false</span><span class="p">}</span><span class="p">}</span><span class="p">;</span></span>
<span id="251L" class="Ln"></span>
<span id="252L" class="Ln">        <span class="c">// It seems [1] that during creation of the first translation,</span></span>
<span id="253L" class="Ln">        <span class="c">// no others may be created or data races occur inside libclang.</span></span>
<span id="254L" class="Ln">        <span class="c">// [1]: Detected by clang's TSan.</span></span>
<span id="255L" class="Ln">        <span class="kt">unsigned</span> <span class="def decl nv">idx</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span></span>
<span id="256L" class="Ln">        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><a href="#processCompileCommand:CXCompileCommand,std::vector<const-char*>,float,(anonymous-namespace)::ThreadSharedState&amp;" class="nf">processCompileCommand</a><span class="p">(</span></span>
<span id="257L" class="Ln">            <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommands_getCommand:CXCompileCommands,unsigned-int" class="nf">clang_CompileCommands_getCommand</a><span class="p">(</span><a href="#234L" class="nv">cmds</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#255L" class="nv">idx</a><span class="o">++</span><span class="p">)</span><span class="p">,</span></span>
<span id="258L" class="Ln">            <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::clangArgs" class="vi">clangArgs</a><span class="p">,</span></span>
<span id="259L" class="Ln">            <span class="m">0</span><span class="p">,</span></span>
<span id="260L" class="Ln">            <a href="#243L" class="nv">tstate</a><span class="p">)</span></span>
<span id="261L" class="Ln">        <span class="p">)</span> <span class="p">{</span></span>
<span id="262L" class="Ln">            <span class="cp">assert</span>(<a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::nWorkingDirUsers" class="vi">nWorkingDirUsers</a> <span class="p">==</span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="263L" class="Ln">        <span class="p">}</span></span>
<span id="264L" class="Ln"></span>
<span id="265L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">atomic_uint</span> <span class="def decl nv">sharedCmdIdx</span><span class="p">(</span><a href="#255L" class="nv">idx</a><span class="p">)</span><span class="p">;</span></span>
<span id="266L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/thread" class="nc">thread</a><span class="p">></span> <span class="def decl nv">threads</span><span class="p">;</span></span>
<span id="267L" class="Ln">        <a href="#266L" class="nv">threads</a><span class="p">.</span><span class="nf">reserve</span><span class="p">(</span><a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::nThreads" class="vi">nThreads</a> <span class="o">-</span> <span class="m">1</span><span class="p">)</span><span class="p">;</span></span>
<span id="268L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">clog</a> <span class="p">&lt;&lt;</span> <span class="s">"Using "</span> <span class="p">&lt;&lt;</span> <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::nThreads" class="vi">nThreads</a> <span class="p">&lt;&lt;</span> <span class="s">" threads.\n"</span><span class="p">;</span></span>
<span id="269L" class="Ln">        <span class="kd">auto</span> <span class="kd">const</span> <span class="def decl nv">worker</span> <span class="p">=</span> <span class="p">[</span><span class="p">&amp;</span><span class="p">]</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span></span>
<span id="270L" class="Ln">            <span class="k">while</span> <span class="p">(</span><span class="o">!</span><a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::cancel" class="vi">cancel</a><span class="p">)</span> <span class="p">{</span></span>
<span id="271L" class="Ln">                <span class="kt">unsigned</span> <span class="def decl nv">cmdIdx</span> <span class="p">=</span> <a href="#265L" class="nv">sharedCmdIdx</a><span class="p">++</span><span class="p">;</span></span>
<span id="272L" class="Ln">                <span class="k">if</span> <span class="p">(</span><a href="#271L" class="nv">cmdIdx</a> <span class="o">>=</span> <a href="#236L" class="nv">nCmds</a><span class="p">)</span></span>
<span id="273L" class="Ln">                    <span class="k">return</span><span class="p">;</span></span>
<span id="274L" class="Ln"></span>
<span id="275L" class="Ln">                <a href="#processCompileCommand:CXCompileCommand,std::vector<const-char*>,float,(anonymous-namespace)::ThreadSharedState&amp;" class="nf">processCompileCommand</a><span class="p">(</span></span>
<span id="276L" class="Ln">                    <a href="../lib-llvm/include/clang-c/CXCompilationDatabase.h.html#clang_CompileCommands_getCommand:CXCompileCommands,unsigned-int" class="nf">clang_CompileCommands_getCommand</a><span class="p">(</span><a href="#234L" class="nv">cmds</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#271L" class="nv">cmdIdx</a><span class="p">)</span><span class="p">,</span></span>
<span id="277L" class="Ln">                    <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::clangArgs" class="vi">clangArgs</a><span class="p">,</span></span>
<span id="278L" class="Ln">                    <span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">></span><span class="p">(</span><a href="#271L" class="nv">cmdIdx</a><span class="p">)</span> <span class="o">/</span> <a href="#236L" class="nv">nCmds</a> <span class="o">*</span> <span class="m">100</span><span class="p">,</span></span>
<span id="279L" class="Ln">                    <a href="#243L" class="nv">tstate</a><span class="p">)</span><span class="p">;</span></span>
<span id="280L" class="Ln">            <span class="p">}</span></span>
<span id="281L" class="Ln">        <span class="p">}</span><span class="p">;</span></span>
<span id="282L" class="Ln">        <span class="k">try</span> <span class="p">{</span></span>
<span id="283L" class="Ln">            <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="def decl nv">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <a href="#283L" class="nv">i</a> <span class="o">&lt;</span> <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::nThreads" class="vi">nThreads</a> <span class="o">-</span> <span class="m">1</span><span class="p">;</span> <span class="o">++</span><a href="#283L" class="nv">i</a><span class="p">)</span></span>
<span id="284L" class="Ln">                <a href="#266L" class="nv">threads</a><span class="p">.</span><span class="nf">emplace_back</span><span class="p">(</span><a href="#269L" class="nv">worker</a><span class="p">)</span><span class="p">;</span></span>
<span id="285L" class="Ln">            <a href="#269L" class="nv">worker</a><a href="#269L" class="p">(</a><span class="p">)</span><span class="p">;</span></span>
<span id="286L" class="Ln">        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="p">...</span><span class="p">)</span> <span class="p">{</span></span>
<span id="287L" class="Ln">            <a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::cancel" class="vi">cancel</a> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c">// Do before locking to reduce wait time.</span></span>
<span id="288L" class="Ln">            <span class="p">{</span></span>
<span id="289L" class="Ln">                <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/lock_guard" class="nc">lock_guard</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/thread/mutex" class="nc">mutex</a><span class="p">></span> <span class="def decl nv">lock</span><span class="p">(</span><a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::workingDirMut" class="vi">workingDirMut</a><span class="p">)</span><span class="p">;</span></span>
<span id="290L" class="Ln">                <a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::cancel" class="vi">cancel</a> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c">// Repeat for condition variable.</span></span>
<span id="291L" class="Ln">            <span class="p">}</span></span>
<span id="292L" class="Ln">            <a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::workingDirChangedOrFree" class="vi">workingDirChangedOrFree</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all" class="nf">notify_all</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="293L" class="Ln">            <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span><span class="p">&amp;</span> <span class="def decl nv">th</span> <a href="#293L" class="p">:</a> <a href="#266L" class="nv">threads</a><span class="p">)</span></span>
<span id="294L" class="Ln">                <a href="#293L" class="nv">th</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/thread/thread/join" class="nf">join</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="295L" class="Ln">            <span class="cp">assert</span>(<a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::nWorkingDirUsers" class="vi">nWorkingDirUsers</a> <span class="p">==</span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="296L" class="Ln">            <span class="k">throw</span><span class="p">;</span></span>
<span id="297L" class="Ln">        <span class="p">}</span></span>
<span id="298L" class="Ln">        <span class="k">for</span> <span class="p">(</span><span class="kd">auto</span><span class="p">&amp;</span> <span class="def decl nv">th</span> <a href="#298L" class="p">:</a> <a href="#266L" class="nv">threads</a><span class="p">)</span></span>
<span id="299L" class="Ln">            <a href="#298L" class="nv">th</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/thread/thread/join" class="nf">join</a><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="300L" class="Ln">        <span class="cp">assert</span>(<a href="#243L" class="nv">tstate</a><span class="p">.</span><a href="#ThreadSharedState::nWorkingDirUsers" class="vi">nWorkingDirUsers</a> <span class="p">==</span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="301L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="302L" class="Ln">        <span class="kt">int</span> <span class="def decl nv">r</span> <span class="p">=</span> <a href="cmdline.hpp.html#synth" class="nn">synth</a><span class="p">::</span><a href="annotate.hpp.html#synth::processTu:CXIndex,synth::MultiTuProcessor&amp;,const-char*const*,int" class="nf">processTu</a><span class="p">(</span></span>
<span id="303L" class="Ln">            <a href="#207L" class="nv">hcidx</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="p">)</span><span class="p">,</span></span>
<span id="304L" class="Ln">            <a href="#212L" class="nv">state</a><span class="p">,</span></span>
<span id="305L" class="Ln">            <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::clangArgs" class="vi">clangArgs</a><span class="p">.</span><span class="nf">data</span><span class="p">(</span><span class="p">)</span><span class="p">,</span></span>
<span id="306L" class="Ln">            <a href="#184L" class="nv">args</a><span class="p">.</span><a href="cmdline.hpp.html#synth::CmdLineArgs::nClangArgs" class="vi">nClangArgs</a><span class="p">)</span><span class="p">;</span></span>
<span id="307L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#302L" class="nv">r</a><span class="p">)</span></span>
<span id="308L" class="Ln">            <span class="k">return</span> <a href="#302L" class="nv">r</a><span class="p">;</span></span>
<span id="309L" class="Ln">    <span class="p">}</span></span>
<span id="310L" class="Ln">    <a href="#212L" class="nv">state</a><span class="p">.</span><a href="MultiTuProcessor.hpp.html#synth::MultiTuProcessor::writeOutput:const-synth::SimpleTemplate&amp;" class="nf">writeOutput</a><span class="p">(</span><a href="#186L" class="nv">tpl</a><span class="p">)</span><span class="p">;</span></span>
<span id="311L" class="Ln">    <span class="k">return</span> <span class="cp">EXIT_SUCCESS</span><span class="p">;</span></span>
<span id="312L" class="Ln"><span class="p">}</span></span>
<span id="313L" class="Ln"></span>
<span id="314L" class="Ln"><span class="kt">int</span> <span class="def decl nf" id="main:int,char*[]">main</span><span class="p">(</span><span class="kt">int</span> <span class="def decl nv">argc</span><span class="p">,</span> <span class="kt">char</span><span class="p">*</span> <span class="def decl nv">argv</span><span class="p">[</span><span class="p">]</span><span class="p">)</span></span>
<span id="315L" class="Ln"><span class="p">{</span></span>
<span id="316L" class="Ln">    <span class="k">try</span> <span class="p">{</span></span>
<span id="317L" class="Ln">        <a href="MultiTuProcessor.hpp.html#21L" class="nn">fs</a><span class="p">::</span><span class="nf">initial_path</span><span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="c">// Save initial path.</span></span>
<span id="318L" class="Ln">        <span class="k">return</span> <a href="#executeCmdLine:const-synth::CmdLineArgs&amp;" class="nf">executeCmdLine</a><span class="p">(</span><a href="cmdline.hpp.html#synth::CmdLineArgs" class="nc">CmdLineArgs</a><span class="p">::</span><a href="cmdline.hpp.html#synth::CmdLineArgs::parse:int,const-char*const*" class="nf">parse</a><span class="p">(</span><a href="#314L" class="nv">argc</a><span class="p">,</span> <a href="#314L" class="nv">argv</a><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="319L" class="Ln">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/error/exception" class="nc">exception</a> <span class="kd">const</span><span class="p">&amp;</span> <span class="def decl nv">e</span><span class="p">)</span> <span class="p">{</span></span>
<span id="320L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_ostream" class="vg">cerr</a> <span class="p">&lt;&lt;</span> <a href="#319L" class="nv">e</a><span class="p">.</span><a href="http://en.cppreference.com/w/cpp/error/exception/what" class="nf">what</a><span class="p">(</span><span class="p">)</span> <span class="p">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span></span>
<span id="321L" class="Ln">        <span class="k">return</span> <span class="cp">EXIT_FAILURE</span><span class="p">;</span></span>
<span id="322L" class="Ln">    <span class="p">}</span></span>
<span id="323L" class="Ln"><span class="p">}</span></span>
<span id="324L" class="Ln"></span>
</pre></div>
        <script src="../code.js"></script>
    </body>
</html>
