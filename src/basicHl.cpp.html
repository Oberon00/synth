<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>src/basicHl.cpp</title>
        <link rel="stylesheet" href="../codestyle-colorful.css">
    </head>
    <body>
        <div class="highlight"><pre><span id="1L" class="Ln"><a href="basicHl.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"basicHl.hpp"</span></a></span>
<span id="2L" class="Ln"></span>
<span id="3L" class="Ln"><a href="output.hpp.html"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">"output.hpp"</span></a></span>
<span id="4L" class="Ln"></span>
<span id="5L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">assert</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="6L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">boost</span><span class="cpf">/</span><span class="cpf">utility</span><span class="cpf">/</span><span class="cpf">string_ref</span><span class="cpf">.</span><span class="cpf">hpp</span><span class="cpf">></span></span>
<span id="7L" class="Ln"></span>
<span id="8L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">istream</span><span class="cpf">></span></span>
<span id="9L" class="Ln"><span class="cp">#</span><span class="cp">include</span> <span class="cpf">&lt;</span><span class="cpf">limits</span><span class="cpf">></span></span>
<span id="10L" class="Ln"></span>
<span id="11L" class="Ln"><span class="kd">using</span> <span class="kd">namespace</span> <a href="basicHl.hpp.html#synth" class="nn">synth</a>;</span>
<span id="12L" class="Ln"></span>
<span id="13L" class="Ln"><span class="kd">namespace</span> <span class="p">{</span></span>
<span id="14L" class="Ln"></span>
<span id="15L" class="Ln"><span class="kd">class</span> <span class="def decl nc" id="CharStream">CharStream</span> <span class="p">{</span></span>
<span id="16L" class="Ln"><span class="kd">public</span><span class="p">:</span></span>
<span id="17L" class="Ln">    <span class="kd">explicit</span> <span class="def decl nf" id="CharStream::CharStream:std::istream&amp;">CharStream</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_istream" class="nc">istream</a><span class="p">&amp;</span> <span class="def decl nv">baseStream</span><span class="p">)</span></span>
<span id="18L" class="Ln">        <span class="p">:</span> <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">(</span><a href="#17L" class="nv">baseStream</a><span class="p">)</span></span>
<span id="19L" class="Ln">        <span class="p">,</span> <a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">(</span><span class="m">0</span><span class="p">)</span></span>
<span id="20L" class="Ln">    <span class="p">{</span><span class="p">}</span></span>
<span id="21L" class="Ln"></span>
<span id="22L" class="Ln">    <a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nf" id="CharStream::peek:char&amp;">peek</span><span class="p">(</span><span class="kt">char</span><span class="p">&amp;</span> <span class="def decl nv">ch</span><span class="p">)</span></span>
<span id="23L" class="Ln">    <span class="p">{</span></span>
<span id="24L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="25L" class="Ln">            <a href="#22L" class="nv">ch</a> <span class="o">=</span> <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="26L" class="Ln">            <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="27L" class="Ln">        <span class="p">}</span></span>
<span id="28L" class="Ln">        <span class="kt">int</span> <span class="def decl nv">ich</span> <span class="p">=</span> <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">peek</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="29L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">good</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="30L" class="Ln">            <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">setstate</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nc">ios</span><span class="p">::</span><span class="vc">failbit</span><span class="p">)</span><span class="p">;</span></span>
<span id="31L" class="Ln">            <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="32L" class="Ln">        <span class="p">}</span></span>
<span id="33L" class="Ln">        <span class="cp">assert</span>(<a href="#28L" class="nv">ich</a> <span class="p">>=</span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="34L" class="Ln">        <span class="cp">assert</span>(<a href="#28L" class="nv">ich</a> <span class="p">&lt;=</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/numeric_limits" class="nc">numeric_limits</a><span class="p">&lt;</span><span class="kt">char</span><span class="p">></span><span class="p">::</span><span class="nf">max</span><span class="p">(</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="35L" class="Ln">        <a href="#22L" class="nv">ch</a> <span class="o">=</span> <span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">></span><span class="p">(</span><a href="#28L" class="nv">ich</a><span class="p">)</span><span class="p">;</span></span>
<span id="36L" class="Ln">        <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="37L" class="Ln">    <span class="p">}</span></span>
<span id="38L" class="Ln"></span>
<span id="39L" class="Ln">    <a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nf" id="CharStream::get:char&amp;">get</span><span class="p">(</span><span class="kt">char</span><span class="p">&amp;</span> <span class="def decl nv">ch</span><span class="p">)</span></span>
<span id="40L" class="Ln">    <span class="p">{</span></span>
<span id="41L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">empty</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="42L" class="Ln">            <a href="#39L" class="nv">ch</a> <span class="o">=</span> <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="43L" class="Ln">            <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">pop_back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="44L" class="Ln">            <span class="o">++</span><a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">;</span></span>
<span id="45L" class="Ln">            <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="46L" class="Ln">        <span class="p">}</span></span>
<span id="47L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">get</span><span class="p">(</span><a href="#39L" class="nv">ch</a><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="48L" class="Ln">            <span class="o">++</span><a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">;</span></span>
<span id="49L" class="Ln">            <span class="cp">assert</span>(<a href="#CharStream::m_offset" class="vi">m_offset</a> <span class="p">==</span> <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">tellg</span><span class="p">(</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="50L" class="Ln">        <span class="p">}</span></span>
<span id="51L" class="Ln">        <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="52L" class="Ln">    <span class="p">}</span></span>
<span id="53L" class="Ln"></span>
<span id="54L" class="Ln"></span>
<span id="55L" class="Ln">    <a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nf" id="CharStream::skipUntil:char">skipUntil</span><span class="p">(</span><span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">)</span></span>
<span id="56L" class="Ln">    <span class="p">{</span></span>
<span id="57L" class="Ln">        <span class="k">for</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/size_t" class="nc">size_t</a> <span class="def decl nv">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <a href="#57L" class="nv">i</a> <span class="o">&lt;</span> <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="o">++</span><a href="#57L" class="nv">i</a><span class="p">)</span> <span class="p">{</span></span>
<span id="58L" class="Ln">            <span class="o">++</span><a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">;</span></span>
<span id="59L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">[</span><a href="#57L" class="nv">i</a><span class="p">]</span> <span class="o">==</span> <a href="#55L" class="nv">ch</a><span class="p">)</span> <span class="p">{</span></span>
<span id="60L" class="Ln">                <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">erase</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <a href="#57L" class="nv">i</a> <span class="o">+</span> <span class="m">1</span><span class="p">)</span><span class="p">;</span></span>
<span id="61L" class="Ln">                <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="62L" class="Ln">            <span class="p">}</span></span>
<span id="63L" class="Ln">        <span class="p">}</span></span>
<span id="64L" class="Ln">        <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">clear</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="65L" class="Ln"></span>
<span id="66L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">)</span> <span class="p">{</span></span>
<span id="67L" class="Ln">            <span class="cp">assert</span>(<a href="#CharStream::m_offset" class="vi">m_offset</a> <span class="p">==</span> <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">tellg</span><span class="p">(</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="68L" class="Ln">            <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">ignore</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/numeric_limits" class="nc">numeric_limits</a><span class="p">&lt;</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/streamsize" class="nc">streamsize</a><span class="p">></span><span class="p">::</span><span class="nf">max</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <a href="#55L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="69L" class="Ln">            <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/fpos" class="nc">streampos</a> <span class="def decl nv">off</span> <span class="p">=</span> <a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">.</span><span class="nf">tellg</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="70L" class="Ln">            <span class="cp">assert</span>(<a href="#69L" class="nv">off</a> <span class="p">>=</span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="71L" class="Ln">            <span class="cp">assert</span>(<a href="#69L" class="nv">off</a> <span class="p">&lt;=</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/numeric_limits" class="nc">numeric_limits</a><span class="p">&lt;</span><span class="kt">unsigned</span><span class="p">></span><span class="p">::</span><span class="nf">max</span><span class="p">(</span><span class="p">)</span>)<span class="p">;</span></span>
<span id="72L" class="Ln">            <a href="#CharStream::m_offset" class="vi">m_offset</a> <span class="o">=</span> <span class="k">static_cast</span><span class="p">&lt;</span><span class="kt">unsigned</span><span class="p">></span><span class="p">(</span><a href="#69L" class="nv">off</a><span class="p">)</span><span class="p">;</span></span>
<span id="73L" class="Ln">        <span class="p">}</span></span>
<span id="74L" class="Ln">        <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="75L" class="Ln">    <span class="p">}</span></span>
<span id="76L" class="Ln"></span>
<span id="77L" class="Ln">    <a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nf" id="CharStream::unget:char">unget</span><span class="p">(</span><span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">)</span></span>
<span id="78L" class="Ln">    <span class="p">{</span></span>
<span id="79L" class="Ln">        <a href="#CharStream::m_buf" class="vi">m_buf</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="#77L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="80L" class="Ln">        <span class="o">--</span><a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">;</span></span>
<span id="81L" class="Ln">        <span class="k">return</span> <span class="o">*</span><span class="kc">this</span><span class="p">;</span></span>
<span id="82L" class="Ln">    <span class="p">}</span></span>
<span id="83L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl nf" id="CharStream::tellg">tellg</span><span class="p">(</span><span class="p">)</span> <span class="kd">const</span> <span class="kd">noexcept</span> <span class="p">{</span> <span class="k">return</span> <a href="#CharStream::m_offset" class="vi">m_offset</a><span class="p">;</span> <span class="p">}</span></span>
<span id="84L" class="Ln">    <span class="kd">explicit</span> <span class="kd">operator</span> <span class="kt">bool</span><span class="p">(</span><span class="p">)</span> <span class="kd">const</span> <span class="kd">noexcept</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">!</span><a href="#CharStream::m_stream" class="vi">m_stream</a><span class="p">;</span> <span class="p">}</span></span>
<span id="85L" class="Ln"></span>
<span id="86L" class="Ln"><span class="kd">private</span><span class="p">:</span></span>
<span id="87L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_istream" class="nc">istream</a><span class="p">&amp;</span> <span class="def decl vi" id="CharStream::m_stream">m_stream</span><span class="p">;</span></span>
<span id="88L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl vi" id="CharStream::m_buf">m_buf</span><span class="p">;</span></span>
<span id="89L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl vi" id="CharStream::m_offset">m_offset</span><span class="p">;</span></span>
<span id="90L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="91L" class="Ln"></span>
<span id="92L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="skipUntilAfter:(anonymous-namespace)::CharStream&amp;,boost::string_ref">skipUntilAfter</span><span class="p">(</span><a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nv">chs</span><span class="p">,</span> <span class="nn">boost</span><span class="p">::</span><span class="nc">string_ref</span> <span class="def decl nv">s</span><span class="p">)</span></span>
<span id="93L" class="Ln"><span class="p">{</span></span>
<span id="94L" class="Ln">    <span class="cp">assert</span>(<a href="#92L" class="nv">s</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span> <span class="p">></span> <span class="m">0</span>)<span class="p">;</span></span>
<span id="95L" class="Ln">    <span class="k">while</span> <span class="p">(</span><a href="#92L" class="nv">chs</a><span class="p">)</span> <span class="p">{</span></span>
<span id="96L" class="Ln">        <a href="#92L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::skipUntil:char" class="nf">skipUntil</a><span class="p">(</span><a href="#92L" class="nv">s</a><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="p">)</span><span class="p">;</span></span>
<span id="97L" class="Ln">        <span class="k">for</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/types/size_t" class="nc">size_t</a> <span class="def decl nv">i</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <a href="#97L" class="nv">i</a> <span class="o">&lt;</span> <a href="#92L" class="nv">s</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="o">++</span><a href="#97L" class="nv">i</a><span class="p">)</span> <span class="p">{</span></span>
<span id="98L" class="Ln">            <span class="kt">char</span> <span class="def decl nv">gotCh</span><span class="p">;</span></span>
<span id="99L" class="Ln">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#92L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#98L" class="nv">gotCh</a><span class="p">)</span><span class="p">)</span></span>
<span id="100L" class="Ln">                <span class="k">return</span><span class="p">;</span></span>
<span id="101L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#98L" class="nv">gotCh</a> <span class="o">!=</span> <a href="#92L" class="nv">s</a><span class="p">[</span><a href="#97L" class="nv">i</a><span class="p">]</span><span class="p">)</span> <span class="p">{</span></span>
<span id="102L" class="Ln">                <a href="#92L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><a href="#98L" class="nv">gotCh</a><span class="p">)</span><span class="p">;</span></span>
<span id="103L" class="Ln">                <span class="k">for</span> <span class="p">(</span><span class="o">--</span><a href="#97L" class="nv">i</a><span class="p">;</span> <a href="#97L" class="nv">i</a> <span class="o">></span> <span class="m">0</span><span class="p">;</span> <span class="o">--</span><a href="#97L" class="nv">i</a><span class="p">)</span></span>
<span id="104L" class="Ln">                    <a href="#92L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><a href="#92L" class="nv">s</a><span class="p">[</span><a href="#97L" class="nv">i</a><span class="p">]</span><span class="p">)</span><span class="p">;</span></span>
<span id="105L" class="Ln">                <span class="k">break</span><span class="p">;</span></span>
<span id="106L" class="Ln">            <span class="p">}</span></span>
<span id="107L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#97L" class="nv">i</a> <span class="o">+</span> <span class="m">1</span> <span class="o">==</span> <a href="#92L" class="nv">s</a><span class="p">.</span><span class="nf">size</span><span class="p">(</span><span class="p">)</span><span class="p">)</span></span>
<span id="108L" class="Ln">                <span class="k">return</span><span class="p">;</span></span>
<span id="109L" class="Ln">        <span class="p">}</span></span>
<span id="110L" class="Ln">    <span class="p">}</span></span>
<span id="111L" class="Ln"><span class="p">}</span></span>
<span id="112L" class="Ln"></span>
<span id="113L" class="Ln"><span class="kd">static</span> <span class="kt">char</span> <span class="def decl nf" id="skipUntilAny:(anonymous-namespace)::CharStream&amp;,const-char*">skipUntilAny</span><span class="p">(</span><a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nv">chs</span><span class="p">,</span> <span class="kt">char</span> <span class="kd">const</span><span class="p">*</span> <span class="def decl nv">s</span><span class="p">)</span></span>
<span id="114L" class="Ln"><span class="p">{</span></span>
<span id="115L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">;</span></span>
<span id="116L" class="Ln">    <span class="k">while</span> <span class="p">(</span><a href="#113L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#115L" class="nv">ch</a><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="117L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">strchr</span><span class="p">(</span><a href="#113L" class="nv">s</a><span class="p">,</span> <a href="#115L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="118L" class="Ln">            <span class="k">return</span> <a href="#115L" class="nv">ch</a><span class="p">;</span></span>
<span id="119L" class="Ln">    <span class="p">}</span></span>
<span id="120L" class="Ln">    <span class="k">return</span> <span class="sc">'\0'</span><span class="p">;</span></span>
<span id="121L" class="Ln"><span class="p">}</span></span>
<span id="122L" class="Ln"></span>
<span id="123L" class="Ln"></span>
<span id="124L" class="Ln"><span class="kd">struct</span> <span class="def decl nc" id="HlState">HlState</span> <span class="p">{</span></span>
<span id="125L" class="Ln">    <a href="#CharStream" class="nc">CharStream</a> <span class="def decl vi" id="HlState::in">in</span><span class="p">;</span></span>
<span id="126L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span><span class="p">&amp;</span> <span class="def decl vi" id="HlState::out">out</span><span class="p">;</span></span>
<span id="127L" class="Ln"><span class="p">}</span><span class="p">;</span></span>
<span id="128L" class="Ln"></span>
<span id="129L" class="Ln"><span class="kd">static</span> <a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">&amp;</span> <span class="def decl nf" id="createMarkup:std::vector<Markup>&amp;,unsigned-int,unsigned-int">createMarkup</span><span class="p">(</span></span>
<span id="130L" class="Ln">    <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span><span class="p">&amp;</span> <span class="def decl nv">markups</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">beg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">end</span><span class="p">)</span> <span class="p">{</span></span>
<span id="131L" class="Ln">    <span class="cp">assert</span>(<a href="#130L" class="nv">beg</a> <span class="p">&lt;</span> <a href="#130L" class="nv">end</a>)<span class="p">;</span></span>
<span id="132L" class="Ln">    <a href="#130L" class="nv">markups</a><span class="p">.</span><span class="nf">emplace_back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="133L" class="Ln">    <a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">&amp;</span> <span class="def decl nv">m</span> <span class="p">=</span> <a href="#130L" class="nv">markups</a><span class="p">.</span><span class="nf">back</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></span>
<span id="134L" class="Ln">    <a href="#133L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::beginOffset" class="vi">beginOffset</a> <span class="o">=</span> <a href="#130L" class="nv">beg</a><span class="p">;</span></span>
<span id="135L" class="Ln">    <a href="#133L" class="nv">m</a><span class="p">.</span><a href="output.hpp.html#synth::Markup::endOffset" class="vi">endOffset</a> <span class="o">=</span> <a href="#130L" class="nv">end</a><span class="p">;</span></span>
<span id="136L" class="Ln">    <span class="k">return</span> <a href="#133L" class="nv">m</a><span class="p">;</span></span>
<span id="137L" class="Ln"><span class="p">}</span></span>
<span id="138L" class="Ln"></span>
<span id="139L" class="Ln"><span class="kd">static</span> <a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">&amp;</span> <span class="def decl nf" id="markTillHere:(anonymous-namespace)::HlState,unsigned-int">markTillHere</span><span class="p">(</span><a href="#HlState" class="nc">HlState</a> <span class="def decl nv">state</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">beg</span><span class="p">)</span> <span class="p">{</span></span>
<span id="140L" class="Ln">    <span class="k">return</span> <a href="#createMarkup:std::vector<Markup>&amp;,unsigned-int,unsigned-int" class="nf">createMarkup</a><span class="p">(</span><a href="#139L" class="nv">state</a><span class="p">.</span><a href="#HlState::out" class="vi">out</a><span class="p">,</span> <a href="#139L" class="nv">beg</a><span class="p">,</span> <a href="#139L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="141L" class="Ln"><span class="p">}</span></span>
<span id="142L" class="Ln"></span>
<span id="143L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="skipQuotes:(anonymous-namespace)::CharStream&amp;,char">skipQuotes</span><span class="p">(</span><a href="#CharStream" class="nc">CharStream</a><span class="p">&amp;</span> <span class="def decl nv">chs</span><span class="p">,</span> <span class="kt">char</span> <span class="def decl nv">quote</span><span class="p">)</span></span>
<span id="144L" class="Ln"><span class="p">{</span></span>
<span id="145L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">delims</span><span class="p">[</span><span class="p">]</span> <span class="p">=</span> <span class="p">{</span><span class="sc">'\\'</span><span class="p">,</span> <a href="#143L" class="nv">quote</a><span class="p">,</span> <span class="sc">'\0'</span><span class="p">}</span><span class="p">;</span></span>
<span id="146L" class="Ln">    <span class="k">for</span> <span class="p">(</span><span class="p">;</span><span class="p">;</span><span class="p">)</span> <span class="p">{</span></span>
<span id="147L" class="Ln">        <span class="kt">char</span> <span class="def decl nv">foundCh</span> <span class="p">=</span> <a href="#skipUntilAny:(anonymous-namespace)::CharStream&amp;,const-char*" class="nf">skipUntilAny</a><span class="p">(</span><a href="#143L" class="nv">chs</a><span class="p">,</span> <a href="#145L" class="nv">delims</a><span class="p">)</span><span class="p">;</span></span>
<span id="148L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#147L" class="nv">foundCh</a> <span class="o">||</span> <a href="#147L" class="nv">foundCh</a> <span class="o">==</span> <a href="#143L" class="nv">quote</a><span class="p">)</span></span>
<span id="149L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="150L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#147L" class="nv">foundCh</a> <span class="o">==</span> <span class="sc">'\\'</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><a href="#143L" class="nv">chs</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#147L" class="nv">foundCh</a><span class="p">)</span><span class="p">)</span></span>
<span id="151L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="152L" class="Ln">    <span class="p">}</span></span>
<span id="153L" class="Ln"><span class="p">}</span></span>
<span id="154L" class="Ln"></span>
<span id="155L" class="Ln"><span class="kd">static</span> <span class="kt">bool</span> <span class="def decl nf" id="hlStringNoPrefix:(anonymous-namespace)::HlState&amp;,unsigned-int">hlStringNoPrefix</span><span class="p">(</span><a href="#HlState" class="nc">HlState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="def decl nv">beg</span><span class="p">)</span></span>
<span id="156L" class="Ln"><span class="p">{</span></span>
<span id="157L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">;</span></span>
<span id="158L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::peek:char&amp;" class="nf">peek</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="159L" class="Ln">        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="160L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#157L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'"'</span> <span class="o">||</span> <a href="#157L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'\''</span><span class="p">)</span> <span class="p">{</span></span>
<span id="161L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="162L" class="Ln">        <a href="#skipQuotes:(anonymous-namespace)::CharStream&amp;,char" class="nf">skipQuotes</a><span class="p">(</span><a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">,</span> <a href="#157L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="163L" class="Ln">        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="164L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#157L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'R'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="165L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="166L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::peek:char&amp;" class="nf">peek</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span> <span class="o">||</span> <a href="#157L" class="nv">ch</a> <span class="o">!=</span> <span class="sc">'"'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="167L" class="Ln">            <a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><span class="sc">'R'</span><span class="p">)</span><span class="p">;</span></span>
<span id="168L" class="Ln">            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="169L" class="Ln">        <span class="p">}</span></span>
<span id="170L" class="Ln">        <a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="171L" class="Ln"></span>
<span id="172L" class="Ln">        <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/string/basic_string" class="nc">string</a> <span class="def decl nv">delim</span> <span class="p">=</span> <span class="s">")"</span><span class="p">;</span></span>
<span id="173L" class="Ln">        <span class="k">while</span> <span class="p">(</span><a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span> <span class="o">&amp;&amp;</span> <a href="#157L" class="nv">ch</a> <span class="o">!=</span> <span class="sc">'('</span><span class="p">)</span></span>
<span id="174L" class="Ln">            <a href="#172L" class="nv">delim</a><span class="p">.</span><span class="nf">push_back</span><span class="p">(</span><a href="#157L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="175L" class="Ln">        <a href="#172L" class="nv">delim</a> <span class="p">+=</span> <span class="sc">'"'</span><span class="p">;</span></span>
<span id="176L" class="Ln">        <a href="#skipUntilAfter:(anonymous-namespace)::CharStream&amp;,boost::string_ref" class="nf">skipUntilAfter</a><span class="p">(</span><a href="#155L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">,</span> <a href="#172L" class="nv">delim</a><span class="p">)</span><span class="p">;</span></span>
<span id="177L" class="Ln">        <a href="#markTillHere:(anonymous-namespace)::HlState,unsigned-int" class="nf">markTillHere</a><span class="p">(</span><a href="#155L" class="nv">state</a><span class="p">,</span> <a href="#155L" class="nv">beg</a><span class="p">)</span><span class="p">.</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::litStr" class="no">litStr</a><span class="p">;</span></span>
<span id="178L" class="Ln">        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span></span>
<span id="179L" class="Ln">    <span class="p">}</span></span>
<span id="180L" class="Ln">    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></span>
<span id="181L" class="Ln"><span class="p">}</span></span>
<span id="182L" class="Ln"></span>
<span id="183L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="hlString:(anonymous-namespace)::HlState&amp;">hlString</span><span class="p">(</span><a href="#HlState" class="nc">HlState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">)</span></span>
<span id="184L" class="Ln"><span class="p">{</span></span>
<span id="185L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">;</span></span>
<span id="186L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::peek:char&amp;" class="nf">peek</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="187L" class="Ln">        <span class="k">return</span><span class="p">;</span></span>
<span id="188L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'L'</span> <span class="o">||</span> <a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'U'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="189L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="190L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#hlStringNoPrefix:(anonymous-namespace)::HlState&amp;,unsigned-int" class="nf">hlStringNoPrefix</a><span class="p">(</span><a href="#183L" class="nv">state</a><span class="p">,</span> <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span><span class="p">)</span><span class="p">)</span></span>
<span id="191L" class="Ln">            <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="192L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'u'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="193L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="194L" class="Ln"></span>
<span id="195L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::peek:char&amp;" class="nf">peek</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="196L" class="Ln">            <span class="k">return</span><span class="p">;</span></span>
<span id="197L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'8'</span><span class="p">)</span></span>
<span id="198L" class="Ln">            <span class="cp">BOOST_VERIFY</span>(<a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#185L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="199L" class="Ln">        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">!=</span> <span class="sc">'"'</span><span class="p">)</span></span>
<span id="200L" class="Ln">            <span class="k">return</span><span class="p">;</span></span>
<span id="201L" class="Ln"></span>
<span id="202L" class="Ln">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#hlStringNoPrefix:(anonymous-namespace)::HlState&amp;,unsigned-int" class="nf">hlStringNoPrefix</a><span class="p">(</span><a href="#183L" class="nv">state</a><span class="p">,</span> <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span> <span class="o">-</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'8'</span><span class="p">)</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span></span>
<span id="203L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#185L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'8'</span><span class="p">)</span></span>
<span id="204L" class="Ln">                <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><span class="sc">'8'</span><span class="p">)</span><span class="p">;</span></span>
<span id="205L" class="Ln">            <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><span class="sc">'u'</span><span class="p">)</span><span class="p">;</span></span>
<span id="206L" class="Ln">        <span class="p">}</span></span>
<span id="207L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="208L" class="Ln">        <a href="#hlStringNoPrefix:(anonymous-namespace)::HlState&amp;,unsigned-int" class="nf">hlStringNoPrefix</a><span class="p">(</span><a href="#183L" class="nv">state</a><span class="p">,</span> <a href="#183L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></span>
<span id="209L" class="Ln">    <span class="p">}</span></span>
<span id="210L" class="Ln"><span class="p">}</span></span>
<span id="211L" class="Ln"></span>
<span id="212L" class="Ln"></span>
<span id="213L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="hlComment:(anonymous-namespace)::HlState&amp;">hlComment</span><span class="p">(</span><a href="#HlState" class="nc">HlState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">)</span></span>
<span id="214L" class="Ln"><span class="p">{</span></span>
<span id="215L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">;</span></span>
<span id="216L" class="Ln">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::peek:char&amp;" class="nf">peek</a><span class="p">(</span><a href="#215L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="217L" class="Ln">        <span class="k">return</span><span class="p">;</span></span>
<span id="218L" class="Ln">    <span class="kt">unsigned</span> <span class="def decl nv">beg</span> <span class="p">=</span> <a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span><span class="p">;</span></span>
<span id="219L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#215L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'/'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="220L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#215L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="221L" class="Ln">        <span class="k">if</span> <span class="p">(</span><a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::skipUntil:char" class="nf">skipUntil</a><span class="p">(</span><span class="sc">'\n'</span><span class="p">)</span><span class="p">)</span></span>
<span id="222L" class="Ln">            <a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><span class="sc">'\n'</span><span class="p">)</span><span class="p">;</span></span>
<span id="223L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><a href="#215L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'*'</span><span class="p">)</span> <span class="p">{</span></span>
<span id="224L" class="Ln">        <span class="cp">BOOST_VERIFY</span>(<a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#215L" class="nv">ch</a><span class="p">)</span>)<span class="p">;</span></span>
<span id="225L" class="Ln">        <a href="#skipUntilAfter:(anonymous-namespace)::CharStream&amp;,boost::string_ref" class="nf">skipUntilAfter</a><span class="p">(</span><a href="#213L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">,</span> <span class="s">"*/"</span><span class="p">)</span><span class="p">;</span></span>
<span id="226L" class="Ln">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></span>
<span id="227L" class="Ln">        <span class="k">return</span><span class="p">;</span></span>
<span id="228L" class="Ln">    <span class="p">}</span></span>
<span id="229L" class="Ln">    <a href="#markTillHere:(anonymous-namespace)::HlState,unsigned-int" class="nf">markTillHere</a><span class="p">(</span><a href="#213L" class="nv">state</a><span class="p">,</span> <a href="#218L" class="nv">beg</a><span class="p">)</span><span class="p">.</span><a href="output.hpp.html#synth::Markup::attrs" class="vi">attrs</a> <span class="o">=</span> <a href="output.hpp.html#synth::TokenAttributes" class="nc">TokenAttributes</a><span class="p">::</span><a href="output.hpp.html#synth::TokenAttributes::cmmt" class="no">cmmt</a><span class="p">;</span></span>
<span id="230L" class="Ln"><span class="p">}</span></span>
<span id="231L" class="Ln"></span>
<span id="232L" class="Ln"><span class="kd">static</span> <span class="kt">void</span> <span class="def decl nf" id="hlAdvance:char,(anonymous-namespace)::HlState&amp;">hlAdvance</span><span class="p">(</span><span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">,</span> <a href="#HlState" class="nc">HlState</a><span class="p">&amp;</span> <span class="def decl nv">state</span><span class="p">)</span></span>
<span id="233L" class="Ln"><span class="p">{</span></span>
<span id="234L" class="Ln">    <span class="kd">static</span> <span class="kt">char</span> <span class="kd">const</span> <span class="def decl nv">kAsciiIdChars</span><span class="p">[</span><span class="p">]</span> <span class="p">=</span></span>
<span id="235L" class="Ln">        <span class="s">"abcdefghijklmnopqrstuvwxyz"</span></span>
<span id="236L" class="Ln">        <span class="s">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span></span>
<span id="237L" class="Ln">        <span class="s">"0123456789"</span> <span class="s">"_"</span> <span class="s">"$"</span> <span class="c">/* $ is MS specific */</span><span class="p">;</span></span>
<span id="238L" class="Ln"></span>
<span id="239L" class="Ln">    <span class="k">switch</span> <span class="p">(</span><a href="#232L" class="nv">ch</a><span class="p">)</span> <span class="p">{</span></span>
<span id="240L" class="Ln">        <span class="k">case</span> <span class="sc">'/'</span><span class="p">:</span></span>
<span id="241L" class="Ln">            <a href="#hlComment:(anonymous-namespace)::HlState&amp;" class="nf">hlComment</a><span class="p">(</span><a href="#232L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="242L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="243L" class="Ln">        <span class="k">case</span> <span class="sc">'\''</span><span class="p">:</span></span>
<span id="244L" class="Ln">        <span class="k">case</span> <span class="sc">'"'</span><span class="p">:</span></span>
<span id="245L" class="Ln">            <a href="#232L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::unget:char" class="nf">unget</a><span class="p">(</span><a href="#232L" class="nv">ch</a><span class="p">)</span><span class="p">;</span></span>
<span id="246L" class="Ln">            <a href="#hlString:(anonymous-namespace)::HlState&amp;" class="nf">hlString</a><span class="p">(</span><a href="#232L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="247L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="248L" class="Ln">        <span class="k">default</span><span class="p">:</span></span>
<span id="249L" class="Ln">            <span class="c">// TODO: Here we assume (a) that the encoding is ASCII-compatible and</span></span>
<span id="250L" class="Ln">            <span class="c">// (b) that all non-ascii characters are identifier characters.</span></span>
<span id="251L" class="Ln">            <span class="c">// Ideally, get() should return the next Unicode codepoint so that</span></span>
<span id="252L" class="Ln">            <span class="c">// we could then decide based on that.</span></span>
<span id="253L" class="Ln">            <span class="k">if</span> <span class="p">(</span><a href="#232L" class="nv">ch</a> <span class="o">>=</span> <span class="m">0</span> <span class="o">&amp;&amp;</span> <a href="#232L" class="nv">ch</a> <span class="o">&lt;=</span> <span class="m">127</span></span>
<span id="254L" class="Ln">                <span class="o">&amp;&amp;</span> <span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><span class="nf">strchr</span><span class="p">(</span><a href="#234L" class="nv">kAsciiIdChars</a><span class="p">,</span> <a href="#232L" class="nv">ch</a><span class="p">)</span> <span class="o">||</span> <a href="#232L" class="nv">ch</a> <span class="o">==</span> <span class="sc">'\\'</span><span class="p">)</span></span>
<span id="255L" class="Ln">            <span class="p">)</span> <span class="p">{</span></span>
<span id="256L" class="Ln">                <span class="k">break</span><span class="p">;</span></span>
<span id="257L" class="Ln">            <span class="p">}</span></span>
<span id="258L" class="Ln">            <a href="#hlString:(anonymous-namespace)::HlState&amp;" class="nf">hlString</a><span class="p">(</span><a href="#232L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="259L" class="Ln">            <span class="k">break</span><span class="p">;</span></span>
<span id="260L" class="Ln">    <span class="p">}</span></span>
<span id="261L" class="Ln"><span class="p">}</span></span>
<span id="262L" class="Ln"></span>
<span id="263L" class="Ln"><span class="p">}</span> <span class="c">// anonymous namespace</span></span>
<span id="264L" class="Ln"></span>
<span id="265L" class="Ln"><span class="kt">void</span> <a href="output.hpp.html#synth" class="nn">synth</a><span class="p">::</span><span class="def decl nf" id="synth::basicHighlightFile:std::istream&amp;,std::vector<Markup>&amp;">basicHighlightFile</span><span class="p">(</span><a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/io/basic_istream" class="nc">istream</a><span class="p">&amp;</span> <span class="def decl nv">f</span><span class="p">,</span> <a href="http://en.cppreference.com/w/" class="nn">std</a><span class="p">::</span><a href="http://en.cppreference.com/w/cpp/container/vector" class="nc">vector</a><span class="p">&lt;</span><a href="output.hpp.html#synth::Markup" class="nc">Markup</a><span class="p">></span><span class="p">&amp;</span> <span class="def decl nv">markups</span><span class="p">)</span></span>
<span id="266L" class="Ln"><span class="p">{</span></span>
<span id="267L" class="Ln">    <span class="kt">char</span> <span class="def decl nv">ch</span><span class="p">;</span></span>
<span id="268L" class="Ln">    <a href="#HlState" class="nc">HlState</a> <span class="def decl nv">state</span> <span class="p">{</span><a href="#CharStream" class="nc">CharStream</a><span class="p">(</span><a href="#265L" class="nv">f</a><span class="p">)</span><span class="p">,</span> <a href="#265L" class="nv">markups</a><span class="p">}</span><span class="p">;</span></span>
<span id="269L" class="Ln">    <span class="k">if</span> <span class="p">(</span><a href="#268L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::tellg" class="nf">tellg</a><span class="p">(</span><span class="p">)</span> <span class="o">==</span> <span class="m">0</span><span class="p">)</span></span>
<span id="270L" class="Ln">        <a href="#hlString:(anonymous-namespace)::HlState&amp;" class="nf">hlString</a><span class="p">(</span><a href="#268L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="271L" class="Ln">    <span class="k">while</span> <span class="p">(</span><a href="#268L" class="nv">state</a><span class="p">.</span><a href="#HlState::in" class="vi">in</a><span class="p">.</span><a href="#CharStream::get:char&amp;" class="nf">get</a><span class="p">(</span><a href="#267L" class="nv">ch</a><span class="p">)</span><span class="p">)</span></span>
<span id="272L" class="Ln">        <a href="#hlAdvance:char,(anonymous-namespace)::HlState&amp;" class="nf">hlAdvance</a><span class="p">(</span><a href="#267L" class="nv">ch</a><span class="p">,</span> <a href="#268L" class="nv">state</a><span class="p">)</span><span class="p">;</span></span>
<span id="273L" class="Ln"><span class="p">}</span></span>
<span id="274L" class="Ln"></span>
</pre></div>
        <script src="../code.js"></script>
    </body>
</html>
